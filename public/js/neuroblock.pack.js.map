{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/moment/locale sync ^\\.\\/.*$","webpack:///./src/Blocks/BCIBlocks.ts","webpack:///./src/Blocks/EventBlocks.ts","webpack:///./src/Blocks/FlowBlocks.ts","webpack:///./src/Blocks/PlayerBlocks.ts","webpack:///./src/Components/averageBandPowerRange.component.ts","webpack:///./src/Components/bciDevice.component.ts","webpack:///./src/Components/blocklyEnd.component.ts","webpack:///./src/Components/buffer.component.ts","webpack:///./src/Components/display.component.ts","webpack:///./src/Components/graph.component.ts","webpack:///./src/Components/number.component.ts","webpack:///./src/Components/signalBandPowerRange.component.ts","webpack:///./src/Components/socket.types.ts","webpack:///./src/Components/string.component.ts","webpack:///./src/Controls/Array.control.ts","webpack:///./src/Controls/Number.control.ts","webpack:///./src/Controls/String.control.ts","webpack:///./src/Playground.ts","webpack:///./src/ReteEditor.ts","webpack:///./src/Sprite.ts","webpack:///./src/Utility/CustomBlock.ts","webpack:///./src/Utility/InterpManager.ts","webpack:///./src/Utility/Toolbox.ts","webpack:///./src/Utility/WindowManager.ts","webpack:///./src/components.ts","webpack:///./src/config.ts","webpack:///./src/graph.ts","webpack:///./src/i18n/en.i18n.ts","webpack:///./src/i18n/i18n.ts","webpack:///./src/main.ts"],"names":[],"mappings":";AAAA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAQ,oBAAoB;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,yBAAiB,4BAA4B;AAC7C;AACA;AACA,0BAAkB,2BAA2B;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,kDAA0C,gCAAgC;AAC1E;AACA;;AAEA;AACA;AACA;AACA,gEAAwD,kBAAkB;AAC1E;AACA,yDAAiD,cAAc;AAC/D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAyC,iCAAiC;AAC1E,wHAAgH,mBAAmB,EAAE;AACrI;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;AACA;AACA;AACA,wBAAgB,uBAAuB;AACvC;;;AAGA;AACA;AACA;AACA;;;;;;;;;;;;ACvJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6E;;;;;;;;;;;;ACnRA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAyE;AAEpB;AAChB;AACuC;AACvC;AAEN;AAE/B,IAAI,MAAM,GAAG,qDAAe,CAAC,+CA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","file":"neuroblock.pack.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"neuroblock\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([\"./src/main.ts\",\"vendors~neuroblock\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","var map = {\n\t\"./af\": \"./node_modules/moment/locale/af.js\",\n\t\"./af.js\": \"./node_modules/moment/locale/af.js\",\n\t\"./ar\": \"./node_modules/moment/locale/ar.js\",\n\t\"./ar-dz\": \"./node_modules/moment/locale/ar-dz.js\",\n\t\"./ar-dz.js\": \"./node_modules/moment/locale/ar-dz.js\",\n\t\"./ar-kw\": \"./node_modules/moment/locale/ar-kw.js\",\n\t\"./ar-kw.js\": \"./node_modules/moment/locale/ar-kw.js\",\n\t\"./ar-ly\": \"./node_modules/moment/locale/ar-ly.js\",\n\t\"./ar-ly.js\": \"./node_modules/moment/locale/ar-ly.js\",\n\t\"./ar-ma\": \"./node_modules/moment/locale/ar-ma.js\",\n\t\"./ar-ma.js\": \"./node_modules/moment/locale/ar-ma.js\",\n\t\"./ar-sa\": \"./node_modules/moment/locale/ar-sa.js\",\n\t\"./ar-sa.js\": \"./node_modules/moment/locale/ar-sa.js\",\n\t\"./ar-tn\": \"./node_modules/moment/locale/ar-tn.js\",\n\t\"./ar-tn.js\": \"./node_modules/moment/locale/ar-tn.js\",\n\t\"./ar.js\": \"./node_modules/moment/locale/ar.js\",\n\t\"./az\": \"./node_modules/moment/locale/az.js\",\n\t\"./az.js\": \"./node_modules/moment/locale/az.js\",\n\t\"./be\": \"./node_modules/moment/locale/be.js\",\n\t\"./be.js\": \"./node_modules/moment/locale/be.js\",\n\t\"./bg\": \"./node_modules/moment/locale/bg.js\",\n\t\"./bg.js\": \"./node_modules/moment/locale/bg.js\",\n\t\"./bm\": \"./node_modules/moment/locale/bm.js\",\n\t\"./bm.js\": \"./node_modules/moment/locale/bm.js\",\n\t\"./bn\": \"./node_modules/moment/locale/bn.js\",\n\t\"./bn.js\": \"./node_modules/moment/locale/bn.js\",\n\t\"./bo\": \"./node_modules/moment/locale/bo.js\",\n\t\"./bo.js\": \"./node_modules/moment/locale/bo.js\",\n\t\"./br\": \"./node_modules/moment/locale/br.js\",\n\t\"./br.js\": \"./node_modules/moment/locale/br.js\",\n\t\"./bs\": \"./node_modules/moment/locale/bs.js\",\n\t\"./bs.js\": \"./node_modules/moment/locale/bs.js\",\n\t\"./ca\": \"./node_modules/moment/locale/ca.js\",\n\t\"./ca.js\": \"./node_modules/moment/locale/ca.js\",\n\t\"./cs\": \"./node_modules/moment/locale/cs.js\",\n\t\"./cs.js\": \"./node_modules/moment/locale/cs.js\",\n\t\"./cv\": \"./node_modules/moment/locale/cv.js\",\n\t\"./cv.js\": \"./node_modules/moment/locale/cv.js\",\n\t\"./cy\": \"./node_modules/moment/locale/cy.js\",\n\t\"./cy.js\": \"./node_modules/moment/locale/cy.js\",\n\t\"./da\": \"./node_modules/moment/locale/da.js\",\n\t\"./da.js\": \"./node_modules/moment/locale/da.js\",\n\t\"./de\": \"./node_modules/moment/locale/de.js\",\n\t\"./de-at\": \"./node_modules/moment/locale/de-at.js\",\n\t\"./de-at.js\": \"./node_modules/moment/locale/de-at.js\",\n\t\"./de-ch\": \"./node_modules/moment/locale/de-ch.js\",\n\t\"./de-ch.js\": \"./node_modules/moment/locale/de-ch.js\",\n\t\"./de.js\": \"./node_modules/moment/locale/de.js\",\n\t\"./dv\": \"./node_modules/moment/locale/dv.js\",\n\t\"./dv.js\": \"./node_modules/moment/locale/dv.js\",\n\t\"./el\": \"./node_modules/moment/locale/el.js\",\n\t\"./el.js\": \"./node_modules/moment/locale/el.js\",\n\t\"./en-SG\": \"./node_modules/moment/locale/en-SG.js\",\n\t\"./en-SG.js\": \"./node_modules/moment/locale/en-SG.js\",\n\t\"./en-au\": \"./node_modules/moment/locale/en-au.js\",\n\t\"./en-au.js\": \"./node_modules/moment/locale/en-au.js\",\n\t\"./en-ca\": \"./node_modules/moment/locale/en-ca.js\",\n\t\"./en-ca.js\": \"./node_modules/moment/locale/en-ca.js\",\n\t\"./en-gb\": \"./node_modules/moment/locale/en-gb.js\",\n\t\"./en-gb.js\": \"./node_modules/moment/locale/en-gb.js\",\n\t\"./en-ie\": \"./node_modules/moment/locale/en-ie.js\",\n\t\"./en-ie.js\": \"./node_modules/moment/locale/en-ie.js\",\n\t\"./en-il\": \"./node_modules/moment/locale/en-il.js\",\n\t\"./en-il.js\": \"./node_modules/moment/locale/en-il.js\",\n\t\"./en-nz\": \"./node_modules/moment/locale/en-nz.js\",\n\t\"./en-nz.js\": \"./node_modules/moment/locale/en-nz.js\",\n\t\"./eo\": \"./node_modules/moment/locale/eo.js\",\n\t\"./eo.js\": \"./node_modules/moment/locale/eo.js\",\n\t\"./es\": \"./node_modules/moment/locale/es.js\",\n\t\"./es-do\": \"./node_modules/moment/locale/es-do.js\",\n\t\"./es-do.js\": \"./node_modules/moment/locale/es-do.js\",\n\t\"./es-us\": \"./node_modules/moment/locale/es-us.js\",\n\t\"./es-us.js\": \"./node_modules/moment/locale/es-us.js\",\n\t\"./es.js\": \"./node_modules/moment/locale/es.js\",\n\t\"./et\": \"./node_modules/moment/locale/et.js\",\n\t\"./et.js\": \"./node_modules/moment/locale/et.js\",\n\t\"./eu\": \"./node_modules/moment/locale/eu.js\",\n\t\"./eu.js\": \"./node_modules/moment/locale/eu.js\",\n\t\"./fa\": \"./node_modules/moment/locale/fa.js\",\n\t\"./fa.js\": \"./node_modules/moment/locale/fa.js\",\n\t\"./fi\": \"./node_modules/moment/locale/fi.js\",\n\t\"./fi.js\": \"./node_modules/moment/locale/fi.js\",\n\t\"./fo\": \"./node_modules/moment/locale/fo.js\",\n\t\"./fo.js\": \"./node_modules/moment/locale/fo.js\",\n\t\"./fr\": \"./node_modules/moment/locale/fr.js\",\n\t\"./fr-ca\": \"./node_modules/moment/locale/fr-ca.js\",\n\t\"./fr-ca.js\": \"./node_modules/moment/locale/fr-ca.js\",\n\t\"./fr-ch\": \"./node_modules/moment/locale/fr-ch.js\",\n\t\"./fr-ch.js\": \"./node_modules/moment/locale/fr-ch.js\",\n\t\"./fr.js\": \"./node_modules/moment/locale/fr.js\",\n\t\"./fy\": \"./node_modules/moment/locale/fy.js\",\n\t\"./fy.js\": \"./node_modules/moment/locale/fy.js\",\n\t\"./ga\": \"./node_modules/moment/locale/ga.js\",\n\t\"./ga.js\": \"./node_modules/moment/locale/ga.js\",\n\t\"./gd\": \"./node_modules/moment/locale/gd.js\",\n\t\"./gd.js\": \"./node_modules/moment/locale/gd.js\",\n\t\"./gl\": \"./node_modules/moment/locale/gl.js\",\n\t\"./gl.js\": \"./node_modules/moment/locale/gl.js\",\n\t\"./gom-latn\": \"./node_modules/moment/locale/gom-latn.js\",\n\t\"./gom-latn.js\": \"./node_modules/moment/locale/gom-latn.js\",\n\t\"./gu\": \"./node_modules/moment/locale/gu.js\",\n\t\"./gu.js\": \"./node_modules/moment/locale/gu.js\",\n\t\"./he\": \"./node_modules/moment/locale/he.js\",\n\t\"./he.js\": \"./node_modules/moment/locale/he.js\",\n\t\"./hi\": \"./node_modules/moment/locale/hi.js\",\n\t\"./hi.js\": \"./node_modules/moment/locale/hi.js\",\n\t\"./hr\": \"./node_modules/moment/locale/hr.js\",\n\t\"./hr.js\": \"./node_modules/moment/locale/hr.js\",\n\t\"./hu\": \"./node_modules/moment/locale/hu.js\",\n\t\"./hu.js\": \"./node_modules/moment/locale/hu.js\",\n\t\"./hy-am\": \"./node_modules/moment/locale/hy-am.js\",\n\t\"./hy-am.js\": \"./node_modules/moment/locale/hy-am.js\",\n\t\"./id\": \"./node_modules/moment/locale/id.js\",\n\t\"./id.js\": \"./node_modules/moment/locale/id.js\",\n\t\"./is\": \"./node_modules/moment/locale/is.js\",\n\t\"./is.js\": \"./node_modules/moment/locale/is.js\",\n\t\"./it\": \"./node_modules/moment/locale/it.js\",\n\t\"./it-ch\": \"./node_modules/moment/locale/it-ch.js\",\n\t\"./it-ch.js\": \"./node_modules/moment/locale/it-ch.js\",\n\t\"./it.js\": \"./node_modules/moment/locale/it.js\",\n\t\"./ja\": \"./node_modules/moment/locale/ja.js\",\n\t\"./ja.js\": \"./node_modules/moment/locale/ja.js\",\n\t\"./jv\": \"./node_modules/moment/locale/jv.js\",\n\t\"./jv.js\": \"./node_modules/moment/locale/jv.js\",\n\t\"./ka\": \"./node_modules/moment/locale/ka.js\",\n\t\"./ka.js\": \"./node_modules/moment/locale/ka.js\",\n\t\"./kk\": \"./node_modules/moment/locale/kk.js\",\n\t\"./kk.js\": \"./node_modules/moment/locale/kk.js\",\n\t\"./km\": \"./node_modules/moment/locale/km.js\",\n\t\"./km.js\": \"./node_modules/moment/locale/km.js\",\n\t\"./kn\": \"./node_modules/moment/locale/kn.js\",\n\t\"./kn.js\": \"./node_modules/moment/locale/kn.js\",\n\t\"./ko\": \"./node_modules/moment/locale/ko.js\",\n\t\"./ko.js\": \"./node_modules/moment/locale/ko.js\",\n\t\"./ku\": \"./node_modules/moment/locale/ku.js\",\n\t\"./ku.js\": \"./node_modules/moment/locale/ku.js\",\n\t\"./ky\": \"./node_modules/moment/locale/ky.js\",\n\t\"./ky.js\": \"./node_modules/moment/locale/ky.js\",\n\t\"./lb\": \"./node_modules/moment/locale/lb.js\",\n\t\"./lb.js\": \"./node_modules/moment/locale/lb.js\",\n\t\"./lo\": \"./node_modules/moment/locale/lo.js\",\n\t\"./lo.js\": \"./node_modules/moment/locale/lo.js\",\n\t\"./lt\": \"./node_modules/moment/locale/lt.js\",\n\t\"./lt.js\": \"./node_modules/moment/locale/lt.js\",\n\t\"./lv\": \"./node_modules/moment/locale/lv.js\",\n\t\"./lv.js\": \"./node_modules/moment/locale/lv.js\",\n\t\"./me\": \"./node_modules/moment/locale/me.js\",\n\t\"./me.js\": \"./node_modules/moment/locale/me.js\",\n\t\"./mi\": \"./node_modules/moment/locale/mi.js\",\n\t\"./mi.js\": \"./node_modules/moment/locale/mi.js\",\n\t\"./mk\": \"./node_modules/moment/locale/mk.js\",\n\t\"./mk.js\": \"./node_modules/moment/locale/mk.js\",\n\t\"./ml\": \"./node_modules/moment/locale/ml.js\",\n\t\"./ml.js\": \"./node_modules/moment/locale/ml.js\",\n\t\"./mn\": \"./node_modules/moment/locale/mn.js\",\n\t\"./mn.js\": \"./node_modules/moment/locale/mn.js\",\n\t\"./mr\": \"./node_modules/moment/locale/mr.js\",\n\t\"./mr.js\": \"./node_modules/moment/locale/mr.js\",\n\t\"./ms\": \"./node_modules/moment/locale/ms.js\",\n\t\"./ms-my\": \"./node_modules/moment/locale/ms-my.js\",\n\t\"./ms-my.js\": \"./node_modules/moment/locale/ms-my.js\",\n\t\"./ms.js\": \"./node_modules/moment/locale/ms.js\",\n\t\"./mt\": \"./node_modules/moment/locale/mt.js\",\n\t\"./mt.js\": \"./node_modules/moment/locale/mt.js\",\n\t\"./my\": \"./node_modules/moment/locale/my.js\",\n\t\"./my.js\": \"./node_modules/moment/locale/my.js\",\n\t\"./nb\": \"./node_modules/moment/locale/nb.js\",\n\t\"./nb.js\": \"./node_modules/moment/locale/nb.js\",\n\t\"./ne\": \"./node_modules/moment/locale/ne.js\",\n\t\"./ne.js\": \"./node_modules/moment/locale/ne.js\",\n\t\"./nl\": \"./node_modules/moment/locale/nl.js\",\n\t\"./nl-be\": \"./node_modules/moment/locale/nl-be.js\",\n\t\"./nl-be.js\": \"./node_modules/moment/locale/nl-be.js\",\n\t\"./nl.js\": \"./node_modules/moment/locale/nl.js\",\n\t\"./nn\": \"./node_modules/moment/locale/nn.js\",\n\t\"./nn.js\": \"./node_modules/moment/locale/nn.js\",\n\t\"./pa-in\": \"./node_modules/moment/locale/pa-in.js\",\n\t\"./pa-in.js\": \"./node_modules/moment/locale/pa-in.js\",\n\t\"./pl\": \"./node_modules/moment/locale/pl.js\",\n\t\"./pl.js\": \"./node_modules/moment/locale/pl.js\",\n\t\"./pt\": \"./node_modules/moment/locale/pt.js\",\n\t\"./pt-br\": \"./node_modules/moment/locale/pt-br.js\",\n\t\"./pt-br.js\": \"./node_modules/moment/locale/pt-br.js\",\n\t\"./pt.js\": \"./node_modules/moment/locale/pt.js\",\n\t\"./ro\": \"./node_modules/moment/locale/ro.js\",\n\t\"./ro.js\": \"./node_modules/moment/locale/ro.js\",\n\t\"./ru\": \"./node_modules/moment/locale/ru.js\",\n\t\"./ru.js\": \"./node_modules/moment/locale/ru.js\",\n\t\"./sd\": \"./node_modules/moment/locale/sd.js\",\n\t\"./sd.js\": \"./node_modules/moment/locale/sd.js\",\n\t\"./se\": \"./node_modules/moment/locale/se.js\",\n\t\"./se.js\": \"./node_modules/moment/locale/se.js\",\n\t\"./si\": \"./node_modules/moment/locale/si.js\",\n\t\"./si.js\": \"./node_modules/moment/locale/si.js\",\n\t\"./sk\": \"./node_modules/moment/locale/sk.js\",\n\t\"./sk.js\": \"./node_modules/moment/locale/sk.js\",\n\t\"./sl\": \"./node_modules/moment/locale/sl.js\",\n\t\"./sl.js\": \"./node_modules/moment/locale/sl.js\",\n\t\"./sq\": \"./node_modules/moment/locale/sq.js\",\n\t\"./sq.js\": \"./node_modules/moment/locale/sq.js\",\n\t\"./sr\": \"./node_modules/moment/locale/sr.js\",\n\t\"./sr-cyrl\": \"./node_modules/moment/locale/sr-cyrl.js\",\n\t\"./sr-cyrl.js\": \"./node_modules/moment/locale/sr-cyrl.js\",\n\t\"./sr.js\": \"./node_modules/moment/locale/sr.js\",\n\t\"./ss\": \"./node_modules/moment/locale/ss.js\",\n\t\"./ss.js\": \"./node_modules/moment/locale/ss.js\",\n\t\"./sv\": \"./node_modules/moment/locale/sv.js\",\n\t\"./sv.js\": \"./node_modules/moment/locale/sv.js\",\n\t\"./sw\": \"./node_modules/moment/locale/sw.js\",\n\t\"./sw.js\": \"./node_modules/moment/locale/sw.js\",\n\t\"./ta\": \"./node_modules/moment/locale/ta.js\",\n\t\"./ta.js\": \"./node_modules/moment/locale/ta.js\",\n\t\"./te\": \"./node_modules/moment/locale/te.js\",\n\t\"./te.js\": \"./node_modules/moment/locale/te.js\",\n\t\"./tet\": \"./node_modules/moment/locale/tet.js\",\n\t\"./tet.js\": \"./node_modules/moment/locale/tet.js\",\n\t\"./tg\": \"./node_modules/moment/locale/tg.js\",\n\t\"./tg.js\": \"./node_modules/moment/locale/tg.js\",\n\t\"./th\": \"./node_modules/moment/locale/th.js\",\n\t\"./th.js\": \"./node_modules/moment/locale/th.js\",\n\t\"./tl-ph\": \"./node_modules/moment/locale/tl-ph.js\",\n\t\"./tl-ph.js\": \"./node_modules/moment/locale/tl-ph.js\",\n\t\"./tlh\": \"./node_modules/moment/locale/tlh.js\",\n\t\"./tlh.js\": \"./node_modules/moment/locale/tlh.js\",\n\t\"./tr\": \"./node_modules/moment/locale/tr.js\",\n\t\"./tr.js\": \"./node_modules/moment/locale/tr.js\",\n\t\"./tzl\": \"./node_modules/moment/locale/tzl.js\",\n\t\"./tzl.js\": \"./node_modules/moment/locale/tzl.js\",\n\t\"./tzm\": \"./node_modules/moment/locale/tzm.js\",\n\t\"./tzm-latn\": \"./node_modules/moment/locale/tzm-latn.js\",\n\t\"./tzm-latn.js\": \"./node_modules/moment/locale/tzm-latn.js\",\n\t\"./tzm.js\": \"./node_modules/moment/locale/tzm.js\",\n\t\"./ug-cn\": \"./node_modules/moment/locale/ug-cn.js\",\n\t\"./ug-cn.js\": \"./node_modules/moment/locale/ug-cn.js\",\n\t\"./uk\": \"./node_modules/moment/locale/uk.js\",\n\t\"./uk.js\": \"./node_modules/moment/locale/uk.js\",\n\t\"./ur\": \"./node_modules/moment/locale/ur.js\",\n\t\"./ur.js\": \"./node_modules/moment/locale/ur.js\",\n\t\"./uz\": \"./node_modules/moment/locale/uz.js\",\n\t\"./uz-latn\": \"./node_modules/moment/locale/uz-latn.js\",\n\t\"./uz-latn.js\": \"./node_modules/moment/locale/uz-latn.js\",\n\t\"./uz.js\": \"./node_modules/moment/locale/uz.js\",\n\t\"./vi\": \"./node_modules/moment/locale/vi.js\",\n\t\"./vi.js\": \"./node_modules/moment/locale/vi.js\",\n\t\"./x-pseudo\": \"./node_modules/moment/locale/x-pseudo.js\",\n\t\"./x-pseudo.js\": \"./node_modules/moment/locale/x-pseudo.js\",\n\t\"./yo\": \"./node_modules/moment/locale/yo.js\",\n\t\"./yo.js\": \"./node_modules/moment/locale/yo.js\",\n\t\"./zh-cn\": \"./node_modules/moment/locale/zh-cn.js\",\n\t\"./zh-cn.js\": \"./node_modules/moment/locale/zh-cn.js\",\n\t\"./zh-hk\": \"./node_modules/moment/locale/zh-hk.js\",\n\t\"./zh-hk.js\": \"./node_modules/moment/locale/zh-hk.js\",\n\t\"./zh-tw\": \"./node_modules/moment/locale/zh-tw.js\",\n\t\"./zh-tw.js\": \"./node_modules/moment/locale/zh-tw.js\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"./node_modules/moment/locale sync recursive ^\\\\.\\\\/.*$\";","import { BCIDevice, BCIDeviceSample, ScalpElectrodes } from \"bci-device\";\r\nimport { Category } from \"../Utility/Toolbox\";\r\nimport { CustomBlock } from \"../Utility/CustomBlock\";\r\nimport * as bci from \"bcijs/browser\";\r\nimport { WindowManager, WindowDeclaration } from \"../Utility/WindowManager\";\r\nimport * as i18n from \"../i18n/i18n\";\r\n\r\nimport config from \"../config\";\r\nimport { TelemetryData } from \"muse-js\";\r\nlet locale = i18n.set_locale(config.LOCALE);\r\n\r\nconst BUFFER_SIZE = 1024;\r\nconst WEIGHT = 0.90;\r\n\r\nlet buffer : number[] = [];\r\nlet weight : number[] = Array(6).fill(0);\r\n\r\n// Add a color for these blocks\r\nBlockly.Msg.BCI_HUE = 180;\r\n\r\n// Declare the bands\r\nWindowManager.clear();\r\nlet buffer_handle = WindowManager.declare(\"eeg_data\", [0, 0]); // Initialized for no empty errors\r\nlet alpha = WindowManager.declare(\"alpha\", 0);\r\nlet beta  = WindowManager.declare(\"beta\",  0);\r\nlet theta = WindowManager.declare(\"theta\", 0);\r\nlet delta = WindowManager.declare(\"delta\", 0);\r\nlet gamma = WindowManager.declare(\"gamma\", 0);\r\nlet engagement = WindowManager.declare(\"engagement\", 0);\r\n\r\nlet battery = WindowManager.declare(\"battery\", -1);\r\nlet temperature = WindowManager.declare(\"temperature\", -1);\r\n\r\n/**\r\n * Device\r\n *\r\n * This is the global device handle used for any connected BCI device.\r\n *\r\n * By default, it is set up to accept samples only from AF7, buffer BUFFER_SIZE\r\n * amount of samples, and then extract alpha, beta, theta, delta, and gamma\r\n * signals to the window. Also, if the BCI device supports telemetry, it will\r\n * subscribe to it as well.\r\n */\r\nexport let Device: BCIDevice = new BCIDevice({\r\n\tdataHandler: (sample: BCIDeviceSample) => {\r\n\t\tif (sample.electrode !== ScalpElectrodes.AF7) return;\r\n\r\n\t\tsample.data.forEach((el: number) => {\r\n\t\t\tif (buffer.length > BUFFER_SIZE) buffer.shift();\r\n\t\t\tbuffer.push(el);\r\n\t\t});\r\n\r\n\t\tif (buffer.length < BUFFER_SIZE) return;\r\n\t\tbuffer_handle.set(buffer);\r\n\r\n\t\tlet psd = bci.psd(buffer);\r\n\r\n\t\tlet al = bci.psdBandPower(psd, sample.sampleRate, \"alpha\");\r\n\t\tlet be = bci.psdBandPower(psd, sample.sampleRate, \"beta\");\r\n\t\tlet th = bci.psdBandPower(psd, sample.sampleRate, \"theta\");\r\n\t\tlet de = bci.psdBandPower(psd, sample.sampleRate, \"delta\");\r\n\t\tlet ga = bci.psdBandPower(psd, sample.sampleRate, \"gamma\");\r\n\t\tlet sum = al + be + th + de + ga;\r\n\r\n\t\tlet w_alpha = al / sum;\r\n\t\tlet w_beta = be / sum;\r\n\t\tlet w_theta = th / sum;\r\n\t\tlet w_delta = de / sum;\r\n\t\tlet w_gamma = ga / sum;\r\n\t\tlet w_engagement = be / (al + th);\r\n\r\n\t\tlet weighted_avg = (original: number, next: number) =>\r\n\t\t\toriginal * WEIGHT + (next || 0) * (1 - WEIGHT);\r\n\r\n\t\tweight[0] = weighted_avg(weight[0], w_alpha);\r\n\t\tweight[1] = weighted_avg(weight[1], w_beta);\r\n\t\tweight[2] = weighted_avg(weight[2], w_theta);\r\n\t\tweight[3] = weighted_avg(weight[3], w_delta);\r\n\t\tweight[4] = weighted_avg(weight[4], w_gamma);\r\n\t\tweight[5] = weighted_avg(weight[5], w_engagement);\r\n\r\n\t\talpha.set(Math.max(weight[0], 0));\r\n\t\tbeta.set(Math.max(weight[1], 0));\r\n\t\ttheta.set(Math.max(weight[2], 0));\r\n\t\tdelta.set(Math.max(weight[3], 0));\r\n\t\tgamma.set(Math.max(weight[4], 0));\r\n\t\tengagement.set(Math.max(weight[5], 0));\r\n\t},\r\n\tstatusHandler: (status: TelemetryData) => {\r\n\t\tbattery.set(status.batteryLevel);\r\n\t\ttemperature.set(status.temperature);\r\n\t}\r\n});\r\n\r\n/**\r\n * Alpha Block\r\n *\r\n * A Blockly block that reports the current value of alpha.\r\n */\r\nexport let Alpha = new CustomBlock(\"Alpha\", {\r\n\tmessage0: locale.bci.alpha,\r\n\targs0: [],\r\n\toutput: \"Number\",\r\n\tcolour: \"%{BKY_BCI_HUE}\",\r\n\ttooltip: locale.bci.tooltip,\r\n\thelpUrl: \"http://www.w3schools.com/jsref/jsref_length_string.asp\"\r\n}, (block: Blockly.Block): (string | number)[] => {\r\n\treturn [alpha.toGetterBinding(), Blockly.JavaScript.ORDER_MEMBER];\r\n});\r\n\r\n/**\r\n * Beta Block\r\n *\r\n * A blockly block that reports the current value of beta.\r\n */\r\nexport let Beta = new CustomBlock(\"Beta\", {\r\n\tmessage0: locale.bci.beta,\r\n\targs0: [],\r\n\toutput: \"Number\",\r\n\tcolour: \"%{BKY_BCI_HUE}\",\r\n\ttooltip: locale.bci.tooltip,\r\n\thelpUrl: \"http://www.w3schools.com/jsref/jsref_length_string.asp\"\r\n}, (block: Blockly.Block): (string | number)[] => {\r\n\treturn [beta.toGetterBinding(), Blockly.JavaScript.ORDER_MEMBER];\r\n});\r\n\r\n/**\r\n * Theta Block\r\n *\r\n * A blockly block that reports the current value of theta.\r\n */\r\nexport let Theta = new CustomBlock(\"Theta\", {\r\n\tmessage0: locale.bci.theta,\r\n\targs0: [],\r\n\toutput: \"Number\",\r\n\tcolour: \"%{BKY_BCI_HUE}\",\r\n\ttooltip: locale.bci.tooltip,\r\n\thelpUrl: \"http://www.w3schools.com/jsref/jsref_length_string.asp\"\r\n}, (block: Blockly.Block): (string | number)[] => {\r\n\treturn [theta.toGetterBinding(), Blockly.JavaScript.ORDER_MEMBER];\r\n});\r\n\r\n/**\r\n * Delta Block\r\n *\r\n * A blockly block that reports the current value of delta.\r\n */\r\nexport let Delta = new CustomBlock(\"Delta\", {\r\n\tmessage0: locale.bci.delta,\r\n\targs0: [],\r\n\toutput: \"Number\",\r\n\tcolour: \"%{BKY_BCI_HUE}\",\r\n\ttooltip: locale.bci.tooltip,\r\n\thelpUrl: \"http://www.w3schools.com/jsref/jsref_length_string.asp\"\r\n}, (block: Blockly.Block): (string | number)[] => {\r\n\treturn [delta.toGetterBinding(), Blockly.JavaScript.ORDER_MEMBER];\r\n});\r\n\r\n/**\r\n * Gamma Block\r\n *\r\n * A blockly block that reports the current value of gamma.\r\n */\r\nexport let Gamma = new CustomBlock(\"Gamma\", {\r\n\tmessage0: locale.bci.gamma,\r\n\targs0: [],\r\n\toutput: \"Number\",\r\n\tcolour: \"%{BKY_BCI_HUE}\",\r\n\ttooltip: locale.bci.tooltip,\r\n\thelpUrl: \"http://www.w3schools.com/jsref/jsref_length_string.asp\"\r\n}, (block: Blockly.Block): (string | number)[] => {\r\n\treturn [gamma.toGetterBinding(), Blockly.JavaScript.ORDER_MEMBER];\r\n});\r\n\r\n/**\r\n * Engagement Block\r\n *\r\n * A blockly block that reports the current value of engagement, as defined by `beta / (alpha + theta)`.\r\n */\r\nexport let Engagement = new CustomBlock(\"Engagement\", {\r\n\tmessage0: locale.bci.engagement,\r\n\targs0: [],\r\n\toutput: \"Number\",\r\n\tcolour: \"%{BKY_BCI_HUE}\",\r\n\ttooltip: locale.bci.tooltip,\r\n\thelpUrl: \"http://www.w3schools.com/jsref/jsref_length_string.asp\"\r\n}, (block: Blockly.Block): (string | number)[] => {\r\n\treturn [engagement.toGetterBinding(), Blockly.JavaScript.ORDER_MEMBER];\r\n});\r\n\r\n/**\r\n * BCI Blockly Category\r\n *\r\n * Creates a Blockly Category with the specified title.\r\n *\r\n * @param title The title to use in the flyout menu in Blockly.\r\n */\r\nexport let BCICategory = (title: string): Category => {\r\n\treturn {\r\n\t\tname: title,\r\n\t\t// FIXME: Figure out why %{Blockly.Msg.BCI_HUE} doesn't work here\r\n\t\tcolour: Blockly.Msg.BCI_HUE,\r\n\r\n\t\tmodules: [Alpha.name, Beta.name, Theta.name, Delta.name, Gamma.name, Engagement.name]\r\n\t};\r\n};\r\n","import { Category } from \"../Utility/Toolbox\";\r\nimport { CustomBlock } from \"../Utility/CustomBlock\";\r\n\r\nimport config from \"../config\";\r\nimport * as i18n from \"../i18n/i18n\";\r\nlet locale = i18n.set_locale(config.LOCALE);\r\nBlockly.Msg.EVENT_HUE = 70;\r\n\r\n/**\r\n * generateEventDropDown\r\n *\r\n * A function that returns array list of supported events\r\n */\r\nlet generateEventDropDown = () => {\r\n\tlet events = locale.events.keys;\r\n\tlet out = [];\r\n\r\n\tfor (let event in events) {\r\n\t\tlet val = event;\r\n\t\tlet key = events[event];\r\n\t\tout.push([key, val]);\r\n\t}\r\n\r\n\treturn out;\r\n};\r\n\r\n/**\r\n * Keypress\r\n *\r\n * A custom block used to capture keypress events.\r\n */\r\nexport let Keypress = new CustomBlock(\r\n\t\"event_keypress\",\r\n\t(b: Blockly.Block) => {\r\n\t\t// Add a label indicating the event block\r\n\t\tb.appendStatementInput(\"keypress_input\")\r\n\t\t\t.appendField(\"On Keypress\")\r\n\t\t\t.appendField(\r\n\t\t\t\tnew Blockly.FieldDropdown(generateEventDropDown()),\r\n\t\t\t\t\"KEY_FILTER\"\r\n\t\t\t);\r\n\r\n\t\t// Show a hat on this block in order to show that this is an event block\r\n\t\tb.setStyle(\"hat_blocks\");\r\n\t\tb.setColour(Blockly.Msg.EVENT_HUE);\r\n\r\n\t\t// Disable previous and next statements in order to fully self-contain event code.\r\n\t\tb.setNextStatement(false, null);\r\n\t\tb.setPreviousStatement(false);\r\n\t},\r\n\t(b: Blockly.Block) => {\r\n\t\tlet key_filter = b.getFieldValue(\"KEY_FILTER\");\r\n\t\tlet code = `__handle_event(\"${key_filter}\", \"${b.id}\")`;\r\n\r\n\t\treturn code;\r\n\t}\r\n);\r\n\r\n/**\r\n * Event Blockly Category\r\n *\r\n * Creates a Blockly Category with the specified title.\r\n *\r\n * @param title The title to use in the flyout menu in Blockly.\r\n */\r\nexport let EventCategory = (title: string): Category => {\r\n\treturn {\r\n\t\tname: title,\r\n\t\tcolour: Blockly.Msg.EVENT_HUE,\r\n\r\n\t\tmodules: [ Keypress.name ]\r\n\t};\r\n};\r\n","import { CustomBlock } from \"../Utility/CustomBlock\";\r\nimport { Button, Label, unwind } from \"../Utility/Toolbox\";\r\nimport { WindowDeclaration, WindowManager } from \"../Utility/WindowManager\";\r\nimport * as i18n from \"../i18n/i18n\";\r\n\r\nimport config from \"../config\";\r\nimport { Category } from \"../Utility/Toolbox\";\r\nimport { Data } from \"rete/types/core/data\";\r\n\r\nimport ReteEditor from \"../ReteEditor\";\r\nimport components from '../components'; // FIXME: How do we do lazy loading?\r\n\r\nlet locale = i18n.set_locale(config.LOCALE);\r\n\r\n// Set the color for blockly\r\nBlockly.Msg.FLOW_HUE = 140;\r\n\r\n/**\r\n * Flow Window Item\r\n *\r\n * The structure of a flow item stored in the window.\r\n */\r\nexport interface flow_window_item {\r\n\tname: string,\r\n\tdata: string\r\n}\r\n\r\n/**\r\n * Flow Block Data\r\n *\r\n * The structure of the data stored in a flow block. Here, editor is the JSON representation\r\n * of the Rete editor's components.\r\n */\r\nexport interface flow_block_data {\r\n\tname: string,\r\n\teditor: Data\r\n}\r\n\r\n/**\r\n * Flow Window Type\r\n *\r\n * The type of the value stored in the window which keeps track of all currently loaded flow\r\n * blocks.\r\n */\r\nexport type flow_window_type = Blockly.dictionary<flow_window_item>;\r\n\r\n/**\r\n * Flow Window List\r\n *\r\n * The handle to the currently loaded flow blocks.\r\n */\r\nexport let flow_window_list = WindowManager.declare(\"flow_list\", {});\r\n\r\n/**\r\n * Flow Final Result\r\n *\r\n * The handle to the output values of the various flow blocks currently loaded. The key\r\n * to these values is the name of the editor itself.\r\n */\r\nexport let flow_final_result = WindowManager.declare(\"blockly_final\", {});\r\n\r\n/**\r\n * Flow Graph Data\r\n *\r\n * The handle to the data displayed on the main graph. Accessible to flow component workers.\r\n *\r\n * @example\r\n * In order to access the graph from within a flow component, do something similar to the following\r\n * within the worker of the {@link component_schema}. Make sure to list {@link WindowManager}\r\n * as a dependency!\r\n *\r\n * ```ts\r\n * let component = {\r\n *     dependencies: [{\r\n *         names: [\"WindowManager\", \"WindowDeclaration\"],\r\n *         path: \"../Utility/WindowManager\"\r\n *     }],\r\n *\r\n *     worker: `\r\n *         let data: Array<number> = ...; // Whatever it may be...\r\n *         let graph = WindowManager.fetch(\"flow_data\");\r\n *         graph.set(data);\r\n *     `\r\n * };\r\n * ```\r\n */\r\nexport let flow_data = WindowManager.declare(\"flow_data\", []);\r\n\r\n/**\r\n * Flow Block\r\n *\r\n * A Blockly custom block used for flow applications.\r\n */\r\nexport interface flow_block extends Blockly.Block {\r\n\teditor_?: ReteEditor,\r\n\tcontainer_?: SVGElement\r\n};\r\n\r\nexport let get_flow_api = (workspace: Blockly.Workspace) => {\r\n\treturn (block_id: string, editor_name: string) => {\r\n\t\tlet block: flow_block = workspace.getBlockById(block_id);\r\n\t\tblock.editor_.process();\r\n\r\n\t\treturn flow_final_result.get()[editor_name];\r\n\t}\r\n};\r\n\r\n/**\r\n * Add Flow Block\r\n *\r\n * Creates a new unique flow block with the specified name. Each block also stores a {@link ReteEditor} and\r\n * the container used for showing the Rete components.\r\n *\r\n * @param name The name of the flow block shown on the created blockly block. Cannot have spaces.\r\n */\r\nexport let AddFlowBlock = (name: string) => {\r\n\tlet editor_name = `${name}_editor@0.0.1`;\r\n\r\n\t// Create the block\r\n\tlet block = new CustomBlock(`flow_block_${name}`, {\r\n\t\tmessage0: `${name} (Flow)`,\r\n\t\targs0: [],\r\n\t\toutput: \"Number\",\r\n\t\tcolour: \"%{BKY_FLOW_HUE}\",\r\n\t\ttooltip: locale.flow.tooltip,\r\n\t\tmutator: \"flow_mutator\",\r\n\t\thelpUrl: \"http://www.w3schools.com/jsref/jsref_length_string.asp\"\r\n\t}, (b: Blockly.Block) => {\r\n\t\tlet result = flow_final_result.get();\r\n\r\n\t\t// Make sure that there is an output for this editor\r\n\t\tif (result[editor_name] == undefined) {\r\n\t\t\treturn [\"''\", Blockly.JavaScript.ORDER_MEMBER];\r\n\t\t}\r\n\r\n\t\treturn [`__get_flow(\"${b.id}\", \"${editor_name}\")`, Blockly.JavaScript.ORDER_NONE];\r\n\t});\r\n\r\n\t// Create a container for the editor\r\n\tlet container = document.createElementNS(\"http://www.w3.org/2000/svg\", \"g\");\r\n\tlet fo = document.createElementNS(\"http://www.w3.org/2000/svg\", \"foreignObject\");\r\n\tfo.setAttribute(\"x\", \"0\");\r\n\tfo.setAttribute(\"y\", \"0\");\r\n\tfo.setAttribute(\"width\", \"100%\");\r\n\tfo.setAttribute(\"height\", \"100%\");\r\n\r\n\tlet rect = document.createElementNS(\"http://www.w3.org/2000/svg\", \"rect\");\r\n\trect.setAttribute(\"width\", \"100%\");\r\n\trect.setAttribute(\"height\", \"100%\");\r\n\trect.classList.add(\"blocklyMutatorBackground\");\r\n\r\n\tlet wrapper = document.createElement(\"div\");\r\n\twrapper.setAttribute(\"xmlns\", \"http://www.w3.org/1999/xhtml\");\r\n\twrapper.style.width = \"100%\";\r\n\twrapper.style.height = \"100%\";\r\n\r\n\tlet flow_container = document.createElement(\"div\");\r\n\r\n\tlet button_template = document.querySelector(\"#rete_buttons\");\r\n\tlet buttons = document.importNode((<any>(button_template)).content, true);\r\n\r\n\t// Set up HTML chain\r\n\twrapper.appendChild(buttons);\r\n\twrapper.appendChild(flow_container);\r\n\tfo.appendChild(wrapper);\r\n\tcontainer.appendChild(rect);\r\n\tcontainer.appendChild(fo);\r\n\r\n\t// Create an editor\r\n\tlet editor = new ReteEditor(editor_name, flow_container);\r\n\r\n\t// Save them to the block\r\n\tlet inner_block: flow_block = block.block();\r\n\tinner_block.container_ = container;\r\n\tinner_block.editor_ = editor;\r\n\tinner_block.data = JSON.stringify({ name: name, editor: {} });\r\n\r\n\t// Save the editor and its serialization in the window\r\n\tlet ls = flow_window_list.get() as flow_window_type;\r\n\tls[name] = {\r\n\t\tname: name,\r\n\t\tdata: \"{}\"\r\n\t};\r\n\tflow_window_list.set(ls);\r\n\r\n\t// Add all of the components to the dropdown menu and register them with the engine / editor\r\n\tlet keys = Object.keys(components);\r\n\tfor (let i = 0; i != keys.length; ++i) {\r\n\t\tlet component = (<any>(components))[keys[i]];\r\n\t\tlet instance = new component();\r\n\t\teditor.register(instance);\r\n\r\n\t\tlet button_class = component.name;\r\n\t\tlet button_group = component.get_group();\r\n\t\tlet btn = wrapper.querySelector(`.${button_class}`) as HTMLButtonElement;\r\n\r\n\t\tbtn.onclick = async () => {\r\n\t\t\tlet node = await instance.createNode();\r\n\t\t\teditor.addNode(node);\r\n\t\t}\r\n\t}\r\n\r\n\t// Start the editor\r\n\teditor.start();\r\n\r\n\treturn block;\r\n}\r\n\r\n/**\r\n * Flow Blockly Category\r\n *\r\n * Creates a category for use in Blockly with the specified title.\r\n *\r\n * @param title The title to use in the flyout menu in Blockly.\r\n */\r\nexport let FlowCategory = (title: string): Category => {\r\n\treturn {\r\n\t\tname: title,\r\n\t\tcustom: \"FLOWS\",\r\n\r\n\t\tcolour: Blockly.Msg.FLOW_HUE,\r\n\t\tmodules: []\r\n\t};\r\n};\r\n\r\n/**\r\n * Flow Category Callback\r\n *\r\n * This is a callback that runs every time the category is opened in Blockly.\r\n * For more info, see\r\n * {@link https://developers.google.com/blockly/guides/configure/web/toolbox#dynamic_categories | the official Blockly docs}.\r\n *\r\n * @param ws The Blockly workspace to link to.\r\n */\r\nexport let FlowCategoryCallback = (ws: Blockly.Workspace): Array<Node> => {\r\n\tlet res: Array<Node> = [];\r\n\tlet fl = <flow_window_type>flow_window_list.get();\r\n\r\n\t// Always have a 'New Flow' button\r\n\tlet button_text = unwind([<Button>{text: locale.flow.add, callbackKey: \"add_flow\"}], true);\r\n\tlet button = Blockly.Xml.textToDom(button_text).firstChild;\r\n\r\n\tres.push(button);\r\n\r\n\t// Add the flow blocks, as needed\r\n\tlet keys = Object.keys(fl);\r\n\tfor (let i = 0; i != keys.length; ++i) {\r\n\t\tlet flow_text = unwind([`flow_block_${fl[keys[i]].name}`], true);\r\n\t\tlet flow = Blockly.Xml.textToDom(flow_text).firstChild;\r\n\r\n\t\tres.push(flow);\r\n\t}\r\n\r\n\treturn res;\r\n};\r\n\r\n/**\r\n * Flow Mutator\r\n *\r\n * This is a custom {@link https://developers.google.com/blockly/guides/create-custom-blocks/web/mutators | Blockly Mutator}\r\n * used in order to nest {@link ReteEditor.ReteEditor | Rete Editors} in blockly custom blocks. This is somewhat complicated,\r\n * as Blockly does not provide ample documentation on this. Based on the\r\n * {@link https://github.com/google/blockly/blob/master/core/mutator.js | stock Blockly mutator}.\r\n */\r\nexport class FlowMutator extends Blockly.Mutator {\r\n\t/**\r\n\t * Get Serialize\r\n\t *\r\n\t * Returns a the minimum options needed for linking a new Mutator with serialization to text (for saving).\r\n\t */\r\n\tstatic get_serialize(): Blockly.mixin_object {\r\n\t\treturn {\r\n\t\t\tmutationToDom: function () {\r\n\t\t\t\tlet container = document.createElement(\"flow_mutation\");\r\n\r\n\t\t\t\treturn container;\r\n\t\t\t},\r\n\r\n\t\t\tdomToMutation: function (e: XMLDocument) {\r\n\t\t\t\t//\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n\r\n\t/**\r\n\t * Constructor\r\n\t *\r\n\t * Does nothing but call the original mutator constructor.\r\n\t */\r\n\tconstructor() {\r\n\t\tsuper([]);\r\n\t}\r\n\r\n\t// Member methods\r\n\t/**\r\n\t * Draw Icon\r\n\t *\r\n\t * Draws the edit icon on flow blocks.\r\n\t *\r\n\t * @param group The parent element that should contain this icon.\r\n\t *\r\n\t * @internal\r\n\t */\r\n\tdrawIcon_(group: Element) {\r\n\t\t// Square with rounded corners.\r\n\t\tBlockly.utils.createSvgElement(\r\n\t\t\t'rect',\r\n\t\t\t{\r\n\t\t\t\t'class': 'blocklyIconShape',\r\n\t\t\t\t'rx': '4',\r\n\t\t\t\t'ry': '4',\r\n\t\t\t\t'height': '16',\r\n\t\t\t\t'width': '16'\r\n\t\t\t},\r\n\t\t\tgroup\r\n\t\t);\r\n\r\n\t\t// TODO: Change this to a flow icon\r\n\t\t// Gear teeth.\r\n\t\tBlockly.utils.createSvgElement('path',\r\n\t\t\t{\r\n\t\t\t\t'class': 'blocklyIconSymbol',\r\n\t\t\t\t'd': 'm4.203,7.296 0,1.368 -0.92,0.677 -0.11,0.41 0.9,1.559 0.41,' +\r\n\t\t\t\t\t'0.11 1.043,-0.457 1.187,0.683 0.127,1.134 0.3,0.3 1.8,0 0.3,' +\r\n\t\t\t\t\t'-0.299 0.127,-1.138 1.185,-0.682 1.046,0.458 0.409,-0.11 0.9,' +\r\n\t\t\t\t\t'-1.559 -0.11,-0.41 -0.92,-0.677 0,-1.366 0.92,-0.677 0.11,' +\r\n\t\t\t\t\t'-0.41 -0.9,-1.559 -0.409,-0.109 -1.046,0.458 -1.185,-0.682 ' +\r\n\t\t\t\t\t'-0.127,-1.138 -0.3,-0.299 -1.8,0 -0.3,0.3 -0.126,1.135 -1.187,' +\r\n\t\t\t\t\t'0.682 -1.043,-0.457 -0.41,0.11 -0.899,1.559 0.108,0.409z'\r\n\t\t\t},\r\n\t\t\tgroup);\r\n\r\n\t\t// TODO: Change this to flow icon\r\n\t\t// Axle hole.\r\n\t\tBlockly.utils.createSvgElement(\r\n\t\t\t'circle',\r\n\t\t\t{\r\n\t\t\t\t'class': 'blocklyIconShape',\r\n\t\t\t\t'r': '2.7',\r\n\t\t\t\t'cx': '8',\r\n\t\t\t\t'cy': '8'\r\n\t\t\t},\r\n\t\t\tgroup\r\n\t\t);\r\n\t};\r\n\r\n\t/**\r\n\t * Create Editor\r\n\t *\r\n\t * Creates the entire HTML layout that houses the ReteEditor. Generated layout looks as follows:\r\n\t *\r\n\t * ```html\r\n\t * <svg>\r\n\t *     <g>\r\n\t *         <rect>\r\n\t *             <!-- Background -->\r\n\t *         </rect>\r\n\t *         <foreignBody>\r\n\t *             <!-- The editor -->\r\n\t *         </foreignBody>\r\n\t *     </g>\r\n\t * </svg>\r\n\t * ```\r\n\t *\r\n\t * @internal\r\n\t */\r\n\tcreateEditor_() {\r\n\t\t// Create the overall container\r\n\t\tthis.svgDialog_ = Blockly.utils.createSvgElement(\r\n\t\t\t'svg',\r\n\t\t\t{\r\n\t\t\t\t'x': Blockly.Bubble.BORDER_WIDTH,\r\n\t\t\t\t'y': Blockly.Bubble.BORDER_WIDTH,\r\n\t\t\t\t\"xmlns\": \"http://www.w3.org/2000/svg\",\r\n\t\t\t\t\"xmlns:xlink\": \"http://www.w3.org/1999/xlink\",\r\n\t\t\t\t\"xmlns:xhtml\": \"http://www.w3.org/1999/xhtml\"\r\n\t\t\t},\r\n\t\t\tnull\r\n\t\t);\r\n\r\n\t\t// -- Add the flow components --\r\n\t\t// Get the editor for this block\r\n\t\tlet block = this.block_ as flow_block;\r\n\t\tlet block_info = JSON.parse(block.data) as flow_block_data;\r\n\t\tlet name = block_info.name;\r\n\t\tlet ls = flow_window_list.get() as flow_window_type;\r\n\t\tlet info = ls[name];\r\n\r\n\t\t// Sanity check\r\n\t\tif (info == undefined)\r\n\t\t\tthrow \"INVALID FLOW BLOCK\";\r\n\r\n\t\t// Initialize RETE.js in this container\r\n\t\tlet editor = block.editor_;\r\n\t\tlet container = block.container_;\r\n\t\tif (block_info.editor.id != undefined)\r\n\t\t\teditor.get_editor().fromJSON(block_info.editor);\r\n\r\n\t\t// Add the flow area to the bubble\r\n\t\tthis.svgDialog_.appendChild(container);\r\n\t\treturn this.svgDialog_;\r\n\t};\r\n\r\n\t/**\r\n\t * Resize Bubble\r\n\t *\r\n\t * This is overloaded in order to make sure that the Rete Editor resizes as well. Most of\r\n\t * this is taken directly from the original mutator.js.\r\n\t *\r\n\t * @internal\r\n\t */\r\n\tresizeBubble_() {\r\n\t\tlet doubleBorderWidth = 2 * Blockly.Bubble.BORDER_WIDTH;\r\n\t\tlet workspaceSize = {\r\n\t\t\twidth: 1200,\r\n\t\t\theight: 400,\r\n\t\t\tx: 2, // FIXME: This is a total guess\r\n\t\t\ty: 2\r\n\t\t};\r\n\t\tlet width;\r\n\r\n\t\t// Flip for RTL users\r\n\t\tif (this.block_.RTL)\r\n\t\t\twidth = -workspaceSize.x;\r\n\t\telse\r\n\t\t\twidth = workspaceSize.width + workspaceSize.x;\r\n\r\n\t\tlet height = workspaceSize.height + doubleBorderWidth * 3;\r\n\t\twidth += doubleBorderWidth * 3;\r\n\r\n\t\t// Only resize if the size difference is significant.  Eliminates shuddering.\r\n\t\tif (Math.abs(this.workspaceWidth_ - width) > doubleBorderWidth ||\r\n\t\t\tMath.abs(this.workspaceHeight_ - height) > doubleBorderWidth) {\r\n\r\n\t\t\t// Record some layout information for getFlyoutMetrics_.\r\n\t\t\tthis.workspaceWidth_ = width;\r\n\t\t\tthis.workspaceHeight_ = height;\r\n\r\n\t\t\t// Resize the bubble.\r\n\t\t\tthis.bubble_.setBubbleSize(\r\n\t\t\t\twidth + doubleBorderWidth, height + doubleBorderWidth);\r\n\t\t\tthis.svgDialog_.setAttribute('width', String(this.workspaceWidth_));\r\n\t\t\tthis.svgDialog_.setAttribute('height', String(this.workspaceHeight_));\r\n\r\n\t\t\tlet container = this.svgDialog_.querySelector(\"div\");\r\n\t\t\tcontainer.setAttribute(\"x\", String(0));\r\n\t\t\tcontainer.setAttribute(\"y\", String(0));\r\n\t\t\tcontainer.style.width = String(this.workspaceWidth_);\r\n\t\t\tcontainer.style.height = String(this.workspaceHeight_);\r\n\t\t}\r\n\r\n\t\t// TODO: Fix this\r\n\t\tif (this.block_.RTL) {\r\n\t\t\t// Scroll the workspace to always left-align.\r\n\t\t\tlet translation = 'translate(' + this.workspaceWidth_ + ',0)';\r\n\t\t\t// this.workspace_.getCanvas().setAttribute('transform', translation);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Set Visible\r\n\t *\r\n\t * Set the visibility of the editor. This has been slightly edited from the original\r\n\t * in order to save the Rete Editor container. As such, this method will create the container\r\n\t * if it has not been yet created, and then toggle its `display`.\r\n\t *\r\n\t * Closing the editor will also trigger a save of the editor's state to the block.\r\n\t *\r\n\t * @param visible Should the editor be visible.\r\n\t */\r\n\tsetVisible(visible: boolean) {\r\n\t\t// If no change, do nothing\r\n\t\tif (visible == this.isVisible())\r\n\t\t\treturn;\r\n\r\n\t\t// Alert everything that a mutator has opened\r\n\t\tBlockly.Events.fire(\r\n\t\t\tnew Blockly.Events.Ui(this.block_, 'mutatorOpen', !visible, visible)\r\n\t\t);\r\n\r\n\t\tif (this.svgDialog_ == undefined) {\r\n\t\t\tlet container = this.createEditor_();\r\n\t\t}\r\n\r\n\t\t// If we should show, show...\r\n\t\tif (visible) {\r\n\t\t\tthis.svgDialog_.style.display = \"block\";\r\n\r\n\t\t\t// Create the bubble\r\n\t\t\tthis.bubble_ = new Blockly.Bubble(\r\n\t\t\t\t<Blockly.WorkspaceSvg>(<unknown>(this.block_.workspace)),\r\n\t\t\t\tthis.svgDialog_,\r\n\t\t\t\tthis.block_.svgPath_,\r\n\t\t\t\tthis.iconXY_,\r\n\t\t\t\tnull,\r\n\t\t\t\tnull\r\n\t\t\t);\r\n\r\n\t\t\t// Expose this mutator's block's ID on its top-level SVG group.\r\n\t\t\tthis.bubble_.setSvgId(this.block_.id);\r\n\r\n\t\t\t// Draw\r\n\t\t\tthis.resizeBubble_();\r\n\t\t\tthis.updateColour();\r\n\r\n\t\t\t// Resize the display\r\n\t\t\tlet block = this.block_ as flow_block;\r\n\t\t\tblock.editor_.get_editor().view.resize();\r\n\t\t} else {\r\n\t\t\t// Save the last editor state for the next initialization\r\n\t\t\tlet block: flow_block = this.block_;\r\n\t\t\tlet data = JSON.parse(block.data) as flow_block_data;\r\n\t\t\tlet ls = flow_window_list.get() as flow_window_type;\r\n\t\t\tlet info = ls[data.name];\r\n\r\n\t\t\t// Convert editor back into a valid editor\r\n\t\t\tlet editor: ReteEditor = block.editor_;\r\n\t\t\tif (info == undefined || editor == undefined)\r\n\t\t\t\tthrow \"INVALID SERIALIZATION OF FLOW COMPONENT\";\r\n\r\n\t\t\tdata.editor = editor.get_editor().toJSON();\r\n\t\t\tthis.block_.data = JSON.stringify(data);\r\n\t\t\tinfo.data = this.block_.data;\r\n\r\n\t\t\tflow_window_list.set(ls);\r\n\r\n\t\t\t// Dispose of the bubble.\r\n\t\t\tthis.svgDialog_.style.display = \"block\";\r\n\t\t\tthis.bubble_.dispose();\r\n\t\t\tthis.bubble_ = null;\r\n\t\t\tthis.workspaceWidth_ = 0;\r\n\t\t\tthis.workspaceHeight_ = 0;\r\n\t\t}\r\n\t}\r\n\r\n\t// Icon overrides\r\n\t/**\r\n\t * Icon Click\r\n\t *\r\n\t * Method that runs when the edit icon is clicked.\r\n\t *\r\n\t * @internal\r\n\t */\r\n\ticonClick_(e: MouseEvent) {\r\n\t\tif (!this.block_.isInFlyout && !Blockly.utils.isRightButton(e)) {\r\n\t\t\tthis.setVisible(!this.isVisible());\r\n\t\t}\r\n\t};\r\n};","import { CustomBlock } from \"../Utility/CustomBlock\";\r\nimport { Label, unwind } from \"../Utility/Toolbox\";\r\nimport { Sprite, Point } from \"../Sprite\";\r\nimport { WindowDeclaration, WindowManager } from \"../Utility/WindowManager\";\r\nimport * as i18n from \"../i18n/i18n\";\r\n\r\nimport config from \"../config\";\r\nimport { Category } from \"../Utility/Toolbox\";\r\nimport { dictionary } from \"../Playground\";\r\nlet locale = i18n.set_locale(config.LOCALE);\r\n\r\n// Set the color for blockly\r\nBlockly.Msg.PLAYER_HUE = 10;\r\n\r\n/**\r\n * Player List Item\r\n *\r\n * The type of a player within the player list\r\n */\r\nexport type player_list_item = [\r\n\tstring, // name\r\n\tstring, // id\r\n\tPoint   // position\r\n];\r\n\r\n/**\r\n * Player List Type\r\n *\r\n * The type of the player list stored in the window.\r\n */\r\nexport type player_list_type = Array<player_list_item>;\r\n\r\n/**\r\n * Player Window List\r\n *\r\n * The list of currently active players, stored in the window.\r\n */\r\nexport let player_window_list = WindowManager.declare(\"player_list\", []);\r\n\r\n/**\r\n * Player Point\r\n *\r\n * A custom block that represents the X and Y position of a player.\r\n */\r\nexport let PlayerPoint = new CustomBlock(\"player_point\", {\r\n\tmessage0: \"X %1 Y %2\",\r\n\targs0: [\r\n\t\t{\r\n\t\t\ttype: \"input_value\",\r\n\t\t\tname: \"X\",\r\n\t\t\tcheck: \"Number\"\r\n\t\t},\r\n\t\t{\r\n\t\t\ttype: \"input_value\",\r\n\t\t\tname: \"Y\",\r\n\t\t\tcheck: \"Number\"\r\n\t\t}\r\n\t],\r\n\toutput: null,\r\n\tcolour: \"%{BKY_PLAYER_HUE}\"\r\n}, (b: Blockly.Block) => {\r\n\tlet x = Blockly.JavaScript.valueToCode(b, \"X\", Blockly.JavaScript.ORDER_ASSIGNMENT) || 0;\r\n\tlet y = Blockly.JavaScript.valueToCode(b, \"Y\", Blockly.JavaScript.ORDER_ASSIGNMENT) || 0;\r\n\r\n\treturn [\"{x: \" + x + \", y: \" + y + \"}\", Blockly.JavaScript.ORDER_MEMBER];\r\n});\r\n\r\n/**\r\n * Player Get\r\n *\r\n * A custom block used for fetching the X or Y position of a player.\r\n */\r\nexport let PlayerGet = new CustomBlock(\"player_get\", (b: Blockly.Block) => {\r\n\tb.appendDummyInput(\"player_select\")\r\n\t\t.appendField(new Blockly.FieldDropdown((): (Blockly.field_options_type) => {\r\n\t\t\tlet res = <player_list_type>player_window_list.get();\r\n\r\n\t\t\treturn (res && res.length > 0 ? res : [[locale.player.none, \"PLAYER_NONE\"]]);\r\n\t\t}), \"PLAYER_OPTIONS\")\r\n\t\t.appendField(new Blockly.FieldDropdown((): (Blockly.field_options_type) => {\r\n\t\t\treturn [[\"X\", \"x\"], [\"Y\", \"y\"]];\r\n\t\t}), \"PLAYER_POSITION_TYPE\");\r\n\r\n\tb.setOutput(true);\r\n\tb.setColour(Blockly.Msg.PLAYER_HUE);\r\n}, (b: Blockly.Block) => {\r\n\tlet player_handle = b.getFieldValue(\"PLAYER_OPTIONS\") || \"''\";\r\n\tlet position_type = b.getFieldValue(\"PLAYER_POSITION_TYPE\");\r\n\tlet code = `JSON.parse(${WindowDeclaration.asGetterBinding(player_handle)}).${position_type}`;\r\n\r\n\treturn [code, Blockly.JavaScript.ORDER_MEMBER];\r\n});\r\n\r\n/**\r\n * Player Set\r\n *\r\n * A custom block used for setting the position of a player. Requires a {@link PlayerGet} block\r\n * as its input.\r\n */\r\nexport let PlayerSet = new CustomBlock(\"player_set\", (b: Blockly.Block) => {\r\n\tb.appendDummyInput(\"player_select\")\r\n\t\t.appendField(\"set\")\r\n\t\t.appendField(new Blockly.FieldDropdown(\r\n\t\t\t(): (Blockly.field_options_type) => {\r\n\t\t\t\tlet res = <player_list_type>player_window_list.get();\r\n\r\n\t\t\t\treturn (res && res.length > 0 ? res : [[locale.player.none, \"PLAYER_NONE\"]]);\r\n\t\t\t}\r\n\t\t), \"PLAYER_OPTIONS\");\r\n\r\n\t// Allow for a connection\r\n\tb.appendValueInput(\"player_new_value\").appendField(\"to\").setCheck(PlayerPoint.name);\r\n\r\n\t// Allow for connecting\r\n\tb.setNextStatement(true);\r\n\tb.setPreviousStatement(true);\r\n\r\n\tb.setColour(Blockly.Msg.PLAYER_HUE);\r\n}, (b: Blockly.Block) => {\r\n\tlet player_handle = b.getFieldValue(\"PLAYER_OPTIONS\") || \"''\";\r\n\r\n\t// Set new value to current value on no input\r\n\tlet new_value = Blockly.JavaScript.valueToCode(b, \"player_new_value\", Blockly.JavaScript.ORDER_NONE) ||\r\n\t\t\"JSON.parse(\" + WindowDeclaration.asGetterBinding(player_handle) + \")\";\r\n\r\n\treturn WindowDeclaration.asSetterBinding(player_handle) + \"JSON.stringify(\" + new_value + \"));\\n\";\r\n});\r\n\r\n/**\r\n * Player Update X\r\n *\r\n * A custom block used for updating the X position of a player using deltas.\r\n */\r\nexport let PlayerUpdateX = new CustomBlock(\"player_update_x\", (b: Blockly.Block) => {\r\n\tb.appendValueInput(\"player_select\")\r\n\t\t.appendField(\"change\")\r\n\t\t.appendField(new Blockly.FieldDropdown(\r\n\t\t\t(): (Blockly.field_options_type) => {\r\n\t\t\t\tlet res = <player_list_type>player_window_list.get();\r\n\r\n\t\t\t\treturn (res && res.length > 0 ? res : [[locale.player.none, \"PLAYER_NONE\"]]);\r\n\t\t\t}\r\n\t\t), \"PLAYER_OPTIONS\")\r\n\t\t.appendField(\"X by\");\r\n\r\n\t// Allow for connecting\r\n\tb.setNextStatement(true);\r\n\tb.setPreviousStatement(true);\r\n\r\n\tb.setColour(Blockly.Msg.PLAYER_HUE);\r\n}, (b: Blockly.Block) => {\r\n\tlet player_handle = b.getFieldValue(\"PLAYER_OPTIONS\") || \"''\";\r\n\r\n\tlet player_win = WindowManager.fetch(player_handle);\r\n\tlet current_value = `JSON.parse(${player_win.toGetterBinding()})`;\r\n\r\n\tlet delta = Blockly.JavaScript.valueToCode(b, \"player_select\", Blockly.JavaScript.ORDER_NONE) || 0;\r\n\r\n\t// Set new value to current value on no input\r\n\tlet new_value = `{ x: (${current_value}.x + ${delta}), y: ${current_value}.y }`;\r\n\treturn WindowDeclaration.asSetterBinding(player_handle) + \"JSON.stringify(\" + new_value + \"));\\n\";\r\n});\r\n\r\n/**\r\n * Player Update Y\r\n *\r\n * A custom block used for updating the Y position of a player using deltas.\r\n */\r\nexport let PlayerUpdateY = new CustomBlock(\"player_update_y\", (b: Blockly.Block) => {\r\n\tb.appendValueInput(\"player_select\")\r\n\t\t.appendField(\"change\")\r\n\t\t.appendField(new Blockly.FieldDropdown(\r\n\t\t\t(): (Blockly.field_options_type) => {\r\n\t\t\t\tlet res = <player_list_type>player_window_list.get();\r\n\r\n\t\t\t\treturn (res && res.length > 0 ? res : [[locale.player.none, \"PLAYER_NONE\"]]);\r\n\t\t\t}\r\n\t\t), \"PLAYER_OPTIONS\")\r\n\t\t.appendField(\"Y by\");\r\n\r\n\t// Allow for connecting\r\n\tb.setNextStatement(true);\r\n\tb.setPreviousStatement(true);\r\n\r\n\tb.setColour(Blockly.Msg.PLAYER_HUE);\r\n}, (b: Blockly.Block) => {\r\n\tlet player_handle = b.getFieldValue(\"PLAYER_OPTIONS\") || \"''\";\r\n\r\n\tlet player_win = WindowManager.fetch(player_handle);\r\n\tlet current_value = `JSON.parse(${player_win.toGetterBinding()})`;\r\n\r\n\tlet delta = Blockly.JavaScript.valueToCode(b, \"player_select\", Blockly.JavaScript.ORDER_NONE) || 0;\r\n\r\n\t// Set new value to current value on no input\r\n\tlet new_value = `{ x: ${current_value}.x, y: (${current_value}.y + ${delta}) }`;\r\n\treturn WindowDeclaration.asSetterBinding(player_handle) + \"JSON.stringify(\" + new_value + \"));\\n\";\r\n});\r\n\r\n/**\r\n * Player Collision Check\r\n *\r\n * A custom block used for setting the position of a player. Requires a {@link PlayerGet} block\r\n * as its input.\r\n */\r\nexport let PlayerCollidesWith = new CustomBlock(\"player_collides\", (b: Blockly.Block) => {\r\n\tb.appendDummyInput(\"player_lhs\")\r\n\t\t.appendField(new Blockly.FieldDropdown(\r\n\t\t\t(): (Blockly.field_options_type) => {\r\n\t\t\t\tlet res = <player_list_type>player_window_list.get();\r\n\r\n\t\t\t\treturn (res && res.length > 0 ? res : [[locale.player.none, \"PLAYER_NONE\"]]);\r\n\t\t\t}\r\n\t\t), \"PLAYER_LHS\")\r\n\t\t.appendField(\" collides with \")\r\n\t\t.appendField(new Blockly.FieldDropdown(\r\n\t\t\t(): (Blockly.field_options_type) => {\r\n\t\t\t\tlet res = <player_list_type>player_window_list.get();\r\n\r\n\t\t\t\treturn (res && res.length > 0 ? res : [[locale.player.none, \"PLAYER_NONE\"]]);\r\n\t\t\t}\r\n\t\t), \"PLAYER_RHS\");\r\n\r\n\t// Allow for connecting\r\n\tb.setOutput(true);\r\n\tb.setColour(Blockly.Msg.PLAYER_HUE);\r\n}, (b: Blockly.Block) => {\r\n\tlet player_lhs = b.getFieldValue(\"PLAYER_LHS\") || \"''\";\r\n\tlet player_rhs = b.getFieldValue(\"PLAYER_RHS\") || \"''\";\r\n\r\n\t// Short out if no player is selected\r\n\tif (player_lhs.length == 0 || player_rhs.length == 0 || player_lhs == \"PLAYER_NONE\" || player_rhs == \"PLAYER_NONE\")\r\n\t\treturn '';\r\n\r\n\t// if we are colliding with the same thing, always return true\r\n\tif (player_lhs == player_rhs)\r\n\t\treturn [\"true\", Blockly.JavaScript.ORDER_MEMBER];\r\n\r\n\t// Get the actual player coordinates\r\n\tlet lhs = WindowManager.fetch(player_lhs);\r\n\tlet rhs = WindowManager.fetch(player_rhs);\r\n\r\n\t// Use bounding box for collision detection\r\n\tconst length = 0.15;\r\n\r\n\t// Radius Collision\r\n\t// TODO: Make this elliptical (or rectangular)\r\n\treturn [\r\n\t\t`__distance(${lhs.toGetterBinding()}, ${rhs.toGetterBinding()}) < ${length}`,\r\n\t\tBlockly.JavaScript.ORDER_NONE\r\n\t];\r\n\r\n\t// See MDN on Axis-Aligned Bounding Box\r\n\t// return [\r\n\t// \t`${lhs.x} < ${rhs.x} + ${length} && ` +\r\n\t// \t\t`${lhs.x} + ${length} > ${rhs.x} && ` +\r\n\t// \t\t`${lhs.y} < ${rhs.y} + ${length} && ` +\r\n\t// \t\t`${rhs.y} + ${length} > ${rhs.y}`,\r\n\t// \tBlockly.JavaScript.ORDER_NONE\r\n\t// ];\r\n\r\n});\r\n\r\n/**\r\n * Player Blockly Category\r\n *\r\n * Creates a category for use in Blockly with the specified title.\r\n *\r\n * @param title The title to use in the flyout menu in Blockly.\r\n */\r\nexport let PlayerCategory = (title: string): Category => {\r\n\treturn {\r\n\t\tname: title,\r\n\t\tcustom: \"PLAYERS\",\r\n\r\n\t\tcolour: Blockly.Msg.PLAYER_HUE,\r\n\t\tmodules: []\r\n\t};\r\n};\r\n\r\n/**\r\n * Player Category Callback\r\n *\r\n * This is a callback that runs every time the category is opened in Blockly.\r\n * For more info, see\r\n * {@link https://developers.google.com/blockly/guides/configure/web/toolbox#dynamic_categories | the official Blockly docs}.\r\n *\r\n * @param ws The workspace to link to.\r\n */\r\nexport let PlayerCategoryCallback = (ws: Blockly.Workspace): Array<Node> => {\r\n\tlet res: Array<Node> = [];\r\n\tlet pl = <player_list_type>player_window_list.get();\r\n\r\n\t// Add blocks if players are available\r\n\tif (pl.length > 0) {\r\n\t\tres.push(Blockly.Xml.textToDom(unwind([PlayerGet.name], true)).firstChild);\r\n\t\tres.push(Blockly.Xml.textToDom(unwind([PlayerSet.name], true)).firstChild);\r\n\t\tres.push(Blockly.Xml.textToDom(unwind([PlayerCollidesWith.name], true)).firstChild);\r\n\t\tres.push(Blockly.Xml.textToDom(unwind([PlayerPoint.name], true)).firstChild);\r\n\r\n\t\t// Position Updates\r\n\t\tres.push(Blockly.Xml.textToDom(unwind([PlayerUpdateX.name], true)).firstChild);\r\n\t\tres.push(Blockly.Xml.textToDom(unwind([PlayerUpdateY.name], true)).firstChild);\r\n\t} else {\r\n\t\tres.push(Blockly.Xml.textToDom(unwind([<Label>{text: locale.help.no_players}], true)).firstChild);\r\n\t}\r\n\r\n\treturn res;\r\n};","\n// WARNING: This file is autogenerated. Please do not edit.\nimport Rete, { Component, Control } from \"rete\";\nimport SocketTypes from \"./socket.types\";\nimport VueRenderPlugin from \"rete-vue-render-plugin\";\n\nimport * as bci from \"bcijs/browser\";\n\nimport range_low from \"../Controls/Number.control\";\nimport range_high from \"../Controls/Number.control\";\n\nlet template = document.querySelector(\"#CustomNode\").innerHTML;\n\nlet CustomSocket = {\n  template: `<div class=\"socket\" :class=\"[type, socket.name, used()?'used':''] | kebab\" :title=\"socket.name\"></div>`,\n\n  props: ['type', 'socket', 'used']\n};\n\nconst as_any: any = VueRenderPlugin;\nlet CustomNode = {\n  template,\n  mixins: [as_any.mixin],\n  methods: {\n    used(io: any) {\n      return io.connections.length;\n    }\n  },\n  components: {\n    Socket: /*VueRenderPlugin.Socket*/ CustomSocket\n  }\n};\n\ninterface dictionary<T> {\n[key: string]: T\n};\n\nexport interface component_data {\ncomponent: any;\ncontrols: dictionary<Control>;\n};\n\nexport default class averageBandPowerRangeComponent extends Component {\n  data: component_data = {\n    component: CustomNode,\n    controls: {}\n  };\n\n  constructor() {\n    super(\"Average Range Band Power\");\n  }\n\n  builder(node: any) {\n    let in0 = new Rete.Input(\"in1\", \"Data\", SocketTypes.Array, true);\n\n    let out0 = new Rete.Output(\"out1\", \"Average Band Power\", SocketTypes.Number, true);\n\n\n    // Add a way to access the controls by name\n    const Controlrange_low = new range_low(this.editor, \"range_low\")\n    const Controlrange_high = new range_high(this.editor, \"range_high\")\n\n    this.data.controls = {\n      range_low: Controlrange_low,\n      range_high: Controlrange_high\n    }\n\n    return node\n      .addInput(in0)\n\n      .addOutput(out0)\n\n      .addControl(Controlrange_low)\n      .addControl(Controlrange_high);\n  }\n\n  worker(node: any, inputs: dictionary<Array<any>>, outputs: dictionary<any>) {\n    // Assert required inputs first\n    if (!(inputs[\"in1\"].length))\n      return;\n\n\n    console.log(\"PSD:\", inputs[\"in1\"][0], [node.data.range_low, node.data.range_high]);\n    let psd = bci.averageBandPowers(inputs['in1'][0], 220, [node.data.range_low, node.data.range_high]);\n    outputs['out1'] = psd[0];\n\n  }\n\n  static get_group() {\n    return \"BCI.JS\";\n  }\n}\n","\n// WARNING: This file is autogenerated. Please do not edit.\nimport Rete, { Component, Control } from \"rete\";\nimport SocketTypes from \"./socket.types\";\nimport VueRenderPlugin from \"rete-vue-render-plugin\";\n\nimport { WindowDeclaration, WindowManager } from \"../Utility/WindowManager\";\n\n\nlet template = document.querySelector(\"#CustomNode\").innerHTML;\n\nlet CustomSocket = {\n  template: `<div class=\"socket\" :class=\"[type, socket.name, used()?'used':''] | kebab\" :title=\"socket.name\"></div>`,\n\n  props: ['type', 'socket', 'used']\n};\n\nconst as_any: any = VueRenderPlugin;\nlet CustomNode = {\n  template,\n  mixins: [as_any.mixin],\n  methods: {\n    used(io: any) {\n      return io.connections.length;\n    }\n  },\n  components: {\n    Socket: /*VueRenderPlugin.Socket*/ CustomSocket\n  }\n};\n\ninterface dictionary<T> {\n[key: string]: T\n};\n\nexport interface component_data {\ncomponent: any;\ncontrols: dictionary<Control>;\n};\n\nexport default class bciDeviceComponent extends Component {\n  data: component_data = {\n    component: CustomNode,\n    controls: {}\n  };\n\n  constructor() {\n    super(\"BCI Device\");\n  }\n\n  builder(node: any) {\n\n    let out0 = new Rete.Output(\"data\", \"EEG Data\", SocketTypes.Array, true);\n\n\n    // Add a way to access the controls by name\n\n    this.data.controls = {\n\n    }\n\n    return node\n\n      .addOutput(out0);\n  }\n\n  worker(node: any, inputs: dictionary<Array<any>>, outputs: dictionary<any>) {\n    // Assert required inputs first\n    if (!(true))\n      return;\n\n\n    let device_data = WindowManager.fetch(\"eeg_data\");\n    outputs[\"data\"] = device_data.get();\n\n  }\n\n  static get_group() {\n    return \"BCI.JS\";\n  }\n}\n","\n// WARNING: This file is autogenerated. Please do not edit.\nimport Rete, { Component, Control } from \"rete\";\nimport SocketTypes from \"./socket.types\";\nimport VueRenderPlugin from \"rete-vue-render-plugin\";\n\nimport { WindowDeclaration, WindowManager } from \"../Utility/WindowManager\";\n\n\nlet template = document.querySelector(\"#CustomNode\").innerHTML;\n\nlet CustomSocket = {\n  template: `<div class=\"socket\" :class=\"[type, socket.name, used()?'used':''] | kebab\" :title=\"socket.name\"></div>`,\n\n  props: ['type', 'socket', 'used']\n};\n\nconst as_any: any = VueRenderPlugin;\nlet CustomNode = {\n  template,\n  mixins: [as_any.mixin],\n  methods: {\n    used(io: any) {\n      return io.connections.length;\n    }\n  },\n  components: {\n    Socket: /*VueRenderPlugin.Socket*/ CustomSocket\n  }\n};\n\ninterface dictionary<T> {\n[key: string]: T\n};\n\nexport interface component_data {\ncomponent: any;\ncontrols: dictionary<Control>;\n};\n\nexport default class blocklyEndComponent extends Component {\n  data: component_data = {\n    component: CustomNode,\n    controls: {}\n  };\n\n  constructor() {\n    super(\"Output\");\n  }\n\n  builder(node: any) {\n    let in0 = new Rete.Input(\"blockly_end\", \"End!\", SocketTypes.Any, false);\n\n\n\n    // Add a way to access the controls by name\n\n    this.data.controls = {\n\n    }\n\n    return node\n      .addInput(in0);\n  }\n\n  worker(node: any, inputs: dictionary<Array<any>>, outputs: dictionary<any>) {\n    // Assert required inputs first\n    if (!(true))\n      return;\n\n\n    let name = this.editor.id;\n    let final = WindowManager.fetch(\"blockly_final\");\n    let as_any: any = final.get();\n\n    as_any[name] = inputs[\"blockly_end\"][0];\n    final.set(as_any);\n\n  }\n\n  static get_group() {\n    return \"BLOCKLY\";\n  }\n}\n","\n// WARNING: This file is autogenerated. Please do not edit.\nimport Rete, { Component, Control } from \"rete\";\nimport SocketTypes from \"./socket.types\";\nimport VueRenderPlugin from \"rete-vue-render-plugin\";\n\n\nimport NumberControl from \"../Controls/Number.control\";\nimport ArrayControl from \"../Controls/Array.control\";\n\nlet template = document.querySelector(\"#CustomNode\").innerHTML;\n\nlet CustomSocket = {\n  template: `<div class=\"socket\" :class=\"[type, socket.name, used()?'used':''] | kebab\" :title=\"socket.name\"></div>`,\n\n  props: ['type', 'socket', 'used']\n};\n\nconst as_any: any = VueRenderPlugin;\nlet CustomNode = {\n  template,\n  mixins: [as_any.mixin],\n  methods: {\n    used(io: any) {\n      return io.connections.length;\n    }\n  },\n  components: {\n    Socket: /*VueRenderPlugin.Socket*/ CustomSocket\n  }\n};\n\ninterface dictionary<T> {\n[key: string]: T\n};\n\nexport interface component_data {\ncomponent: any;\ncontrols: dictionary<Control>;\n};\n\nexport default class bufferComponent extends Component {\n  data: component_data = {\n    component: CustomNode,\n    controls: {}\n  };\n\n  constructor() {\n    super(\"Buffer\");\n  }\n\n  builder(node: any) {\n    let in0 = new Rete.Input(\"num_in\", \"Number In\", SocketTypes.Number, true);\n\n    let out0 = new Rete.Output(\"arr_out\", \"Buffer Out\", SocketTypes.Array, true);\n\n\n    // Add a way to access the controls by name\n    const Controlb_size = new NumberControl(this.editor, \"b_size\")\n    const Controlarr = new ArrayControl(this.editor, \"arr\")\n\n    this.data.controls = {\n      b_size: Controlb_size,\n      arr: Controlarr\n    }\n\n    return node\n      .addInput(in0)\n\n      .addOutput(out0)\n\n      .addControl(Controlb_size)\n      .addControl(Controlarr);\n  }\n\n  worker(node: any, inputs: dictionary<Array<any>>, outputs: dictionary<any>) {\n    // Assert required inputs first\n    if (!(inputs[\"num_in\"].length))\n      return;\n\n\n    let control: any = this.data.controls[\"arr\"];\n    let array_control: ArrayControl = control;\n\n    array_control.push_sample(inputs[\"num_in\"]);\n    outputs['arr_out'] = node.data.arr.buffer;\n\n  }\n\n  static get_group() {\n    return \"VARIABLE\";\n  }\n}\n","\n// WARNING: This file is autogenerated. Please do not edit.\nimport Rete, { Component, Control } from \"rete\";\nimport SocketTypes from \"./socket.types\";\nimport VueRenderPlugin from \"rete-vue-render-plugin\";\n\n\nimport StringControl from \"../Controls/String.control\";\n\nlet template = document.querySelector(\"#OperatorNode\").innerHTML;\n\nlet CustomSocket = {\n  template: `<div class=\"socket\" :class=\"[type, socket.name, used()?'used':''] | kebab\" :title=\"socket.name\"></div>`,\n\n  props: ['type', 'socket', 'used']\n};\n\nconst as_any: any = VueRenderPlugin;\nlet CustomNode = {\n  template,\n  mixins: [as_any.mixin],\n  methods: {\n    used(io: any) {\n      return io.connections.length;\n    }\n  },\n  components: {\n    Socket: /*VueRenderPlugin.Socket*/ CustomSocket\n  }\n};\n\ninterface dictionary<T> {\n[key: string]: T\n};\n\nexport interface component_data {\ncomponent: any;\ncontrols: dictionary<Control>;\n};\n\nexport default class displayComponent extends Component {\n  data: component_data = {\n    component: CustomNode,\n    controls: {}\n  };\n\n  constructor() {\n    super(\"Print String\");\n  }\n\n  builder(node: any) {\n    let in0 = new Rete.Input(\"any_in\", \"Any\", SocketTypes.Any, true);\n\n\n\n    // Add a way to access the controls by name\n    const Controlstr = new StringControl(this.editor, \"str\")\n\n    this.data.controls = {\n      str: Controlstr\n    }\n\n    return node\n      .addInput(in0)\n\n\n      .addControl(Controlstr);\n  }\n\n  worker(node: any, inputs: dictionary<Array<any>>, outputs: dictionary<any>) {\n    // Assert required inputs first\n    if (!(inputs[\"any_in\"].length))\n      return;\n\n\n    let as_string = JSON.stringify(inputs[\"any_in\"].length == 1 ? inputs[\"any_in\"][0] : inputs[\"any_in\"]) || \"undefined\";\n    let control: any = this.data.controls[\"str\"];\n    let str_control: StringControl = control;\n\n    str_control.setValue(as_string);\n\n  }\n\n  static get_group() {\n    return \"PRINT\";\n  }\n}\n","\n// WARNING: This file is autogenerated. Please do not edit.\nimport Rete, { Component, Control } from \"rete\";\nimport SocketTypes from \"./socket.types\";\nimport VueRenderPlugin from \"rete-vue-render-plugin\";\n\nimport { WindowDeclaration, WindowManager } from \"../Utility/WindowManager\";\n\n\nlet template = document.querySelector(\"#CustomNode\").innerHTML;\n\nlet CustomSocket = {\n  template: `<div class=\"socket\" :class=\"[type, socket.name, used()?'used':''] | kebab\" :title=\"socket.name\"></div>`,\n\n  props: ['type', 'socket', 'used']\n};\n\nconst as_any: any = VueRenderPlugin;\nlet CustomNode = {\n  template,\n  mixins: [as_any.mixin],\n  methods: {\n    used(io: any) {\n      return io.connections.length;\n    }\n  },\n  components: {\n    Socket: /*VueRenderPlugin.Socket*/ CustomSocket\n  }\n};\n\ninterface dictionary<T> {\n[key: string]: T\n};\n\nexport interface component_data {\ncomponent: any;\ncontrols: dictionary<Control>;\n};\n\nexport default class graphComponent extends Component {\n  data: component_data = {\n    component: CustomNode,\n    controls: {}\n  };\n\n  constructor() {\n    super(\"Plot Graph\");\n  }\n\n  builder(node: any) {\n    let in0 = new Rete.Input(\"data_in\", \"Array<Number>\", SocketTypes.Array, true);\n\n\n\n    // Add a way to access the controls by name\n\n    this.data.controls = {\n\n    }\n\n    return node\n      .addInput(in0);\n  }\n\n  worker(node: any, inputs: dictionary<Array<any>>, outputs: dictionary<any>) {\n    // Assert required inputs first\n    if (!(inputs[\"data_in\"].length))\n      return;\n\n\n    let save_to = WindowManager.fetch(\"flow_data\");\n    console.log(inputs[\"data_in\"]);\n    save_to.set(inputs[\"data_in\"][0]);\n\n  }\n\n  static get_group() {\n    return \"GRAPH\";\n  }\n}\n","\n// WARNING: This file is autogenerated. Please do not edit.\nimport Rete, { Component, Control } from \"rete\";\nimport SocketTypes from \"./socket.types\";\nimport VueRenderPlugin from \"rete-vue-render-plugin\";\n\n\nimport NumberControl from \"../Controls/Number.control\";\n\nlet template = document.querySelector(\"#OperatorNode\").innerHTML;\n\nlet CustomSocket = {\n  template: `<div class=\"socket\" :class=\"[type, socket.name, used()?'used':''] | kebab\" :title=\"socket.name\"></div>`,\n\n  props: ['type', 'socket', 'used']\n};\n\nconst as_any: any = VueRenderPlugin;\nlet CustomNode = {\n  template,\n  mixins: [as_any.mixin],\n  methods: {\n    used(io: any) {\n      return io.connections.length;\n    }\n  },\n  components: {\n    Socket: /*VueRenderPlugin.Socket*/ CustomSocket\n  }\n};\n\ninterface dictionary<T> {\n[key: string]: T\n};\n\nexport interface component_data {\ncomponent: any;\ncontrols: dictionary<Control>;\n};\n\nexport default class numberComponent extends Component {\n  data: component_data = {\n    component: CustomNode,\n    controls: {}\n  };\n\n  constructor() {\n    super(\"Number\");\n  }\n\n  builder(node: any) {\n    let in0 = new Rete.Input(\"num_in\", \"Number\", SocketTypes.Number, true);\n\n    let out0 = new Rete.Output(\"num_out\", \"Number\", SocketTypes.Number, true);\n\n\n    // Add a way to access the controls by name\n    const Controlnum = new NumberControl(this.editor, \"num\")\n\n    this.data.controls = {\n      num: Controlnum\n    }\n\n    return node\n      .addInput(in0)\n\n      .addOutput(out0)\n\n      .addControl(Controlnum);\n  }\n\n  worker(node: any, inputs: dictionary<Array<any>>, outputs: dictionary<any>) {\n    // Assert required inputs first\n    if (!(true))\n      return;\n\n\n    let control: any = this.data.controls[\"num\"];\n    let num_control: NumberControl = control;\n\n    if (inputs.num_in.length && inputs.num_in[0] != undefined) {\n      node.data.num = inputs['num_in'][0];\n\n      // Update the control to show the input\n      num_control.setValue(node.data.num);\n    }\n\n    outputs['num_out'] = node.data.num;\n\n  }\n\n  static get_group() {\n    return \"VARIABLE\";\n  }\n}\n","\n// WARNING: This file is autogenerated. Please do not edit.\nimport Rete, { Component, Control } from \"rete\";\nimport SocketTypes from \"./socket.types\";\nimport VueRenderPlugin from \"rete-vue-render-plugin\";\n\nimport * as bci from \"bcijs/browser\";\n\nimport range_low from \"../Controls/Number.control\";\nimport range_high from \"../Controls/Number.control\";\n\nlet template = document.querySelector(\"#CustomNode\").innerHTML;\n\nlet CustomSocket = {\n  template: `<div class=\"socket\" :class=\"[type, socket.name, used()?'used':''] | kebab\" :title=\"socket.name\"></div>`,\n\n  props: ['type', 'socket', 'used']\n};\n\nconst as_any: any = VueRenderPlugin;\nlet CustomNode = {\n  template,\n  mixins: [as_any.mixin],\n  methods: {\n    used(io: any) {\n      return io.connections.length;\n    }\n  },\n  components: {\n    Socket: /*VueRenderPlugin.Socket*/ CustomSocket\n  }\n};\n\ninterface dictionary<T> {\n[key: string]: T\n};\n\nexport interface component_data {\ncomponent: any;\ncontrols: dictionary<Control>;\n};\n\nexport default class signalBandPowerRangeComponent extends Component {\n  data: component_data = {\n    component: CustomNode,\n    controls: {}\n  };\n\n  constructor() {\n    super(\"Signal Bands Power Range\");\n  }\n\n  builder(node: any) {\n    let in0 = new Rete.Input(\"in1\", \"Data\", SocketTypes.Array, true);\n\n    let out0 = new Rete.Output(\"out1\", \"Signal Band Power\", SocketTypes.Number, true);\n\n\n    // Add a way to access the controls by name\n    const Controlrange_low = new range_low(this.editor, \"range_low\")\n    const Controlrange_high = new range_high(this.editor, \"range_high\")\n\n    this.data.controls = {\n      range_low: Controlrange_low,\n      range_high: Controlrange_high\n    }\n\n    return node\n      .addInput(in0)\n\n      .addOutput(out0)\n\n      .addControl(Controlrange_low)\n      .addControl(Controlrange_high);\n  }\n\n  worker(node: any, inputs: dictionary<Array<any>>, outputs: dictionary<any>) {\n    // Assert required inputs first\n    if (!(inputs[\"in1\"].length))\n      return;\n\n\n    let bands = [node.data.range_low, node.data.range_high];\n    let psd: any = bci.signalBandPower(inputs['in1'][0], 220, bands);\n    outputs['out1'] = psd;\n\n  }\n\n  static get_group() {\n    return \"BCI.JS\";\n  }\n}\n","\nimport Rete from \"rete\";\n\ninterface dictionary<T> {\n[key: string]: T\n};\n\nlet SocketTypes: dictionary<any> = {\n  Array: new Rete.Socket(\"Array\"),\n  Number: new Rete.Socket(\"Number\"),\n  String: new Rete.Socket(\"String\")\n};\n\n// Make an 'any' socket that accepts all types\nlet any_t = new Rete.Socket(\"Any\");\nlet keys = Object.keys(SocketTypes);\nfor (let i = 0; i != keys.length; ++i)\n  SocketTypes[keys[i]].combineWith(any_t);\n\nSocketTypes[\"Any\"] = any_t;\n\nexport default SocketTypes;\n","\n// WARNING: This file is autogenerated. Please do not edit.\nimport Rete, { Component, Control } from \"rete\";\nimport SocketTypes from \"./socket.types\";\nimport VueRenderPlugin from \"rete-vue-render-plugin\";\n\n\nimport StringControl from \"../Controls/String.control\";\n\nlet template = document.querySelector(\"#OperatorNode\").innerHTML;\n\nlet CustomSocket = {\n  template: `<div class=\"socket\" :class=\"[type, socket.name, used()?'used':''] | kebab\" :title=\"socket.name\"></div>`,\n\n  props: ['type', 'socket', 'used']\n};\n\nconst as_any: any = VueRenderPlugin;\nlet CustomNode = {\n  template,\n  mixins: [as_any.mixin],\n  methods: {\n    used(io: any) {\n      return io.connections.length;\n    }\n  },\n  components: {\n    Socket: /*VueRenderPlugin.Socket*/ CustomSocket\n  }\n};\n\ninterface dictionary<T> {\n[key: string]: T\n};\n\nexport interface component_data {\ncomponent: any;\ncontrols: dictionary<Control>;\n};\n\nexport default class stringComponent extends Component {\n  data: component_data = {\n    component: CustomNode,\n    controls: {}\n  };\n\n  constructor() {\n    super(\"String\");\n  }\n\n  builder(node: any) {\n\n    let out0 = new Rete.Output(\"str_out\", \"String\", SocketTypes.String, true);\n\n\n    // Add a way to access the controls by name\n    const Controlstr = new StringControl(this.editor, \"str\")\n\n    this.data.controls = {\n      str: Controlstr\n    }\n\n    return node\n\n      .addOutput(out0)\n\n      .addControl(Controlstr);\n  }\n\n  worker(node: any, inputs: dictionary<Array<any>>, outputs: dictionary<any>) {\n    // Assert required inputs first\n    if (!(true))\n      return;\n\n\n    outputs['str_out'] = node.data.str;\n\n  }\n\n  static get_group() {\n    return \"VARIABLE\";\n  }\n}\n","const BUFFER_SIZE = 200;\r\n\r\nimport { Control } from \"rete\";\r\n\r\nconst VueArrayControl = {\r\n\tprops: ['readonly', 'emitter', 'ikey', 'getData', 'putData'],\r\n\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tbuffer: [0]\r\n\t\t}\r\n\t},\r\n\r\n\tmethods: {\r\n\t\tpush_sample(item: any) {\r\n\t\t\tif (this.buffer.length > BUFFER_SIZE)\r\n\t\t\t\tthis.buffer.shift();\r\n\r\n\t\t\tthis.buffer.push(item);\r\n\r\n\t\t\tif (this.buffer.length > BUFFER_SIZE)\r\n\t\t\t\tthis.update();\r\n\t\t},\r\n\r\n\t\tupdate() {\r\n\t\t\tthis.emitter.trigger('process');\r\n\t\t}\r\n\t},\r\n\r\n\tmounted() {\r\n\t\tthis.buffer = this.getData(this.ikey);\r\n\t}\r\n}\r\n\r\nexport default class ArrayControl extends Control {\r\n\t// FIXME: Figure out what these hidden types are\r\n\tvueContext: any;\r\n\tcomponent: any;\r\n\tprops: any;\r\n\r\n\tconstructor(emitter: unknown, ikey: string, readonly: boolean = false) {\r\n\t\tsuper(ikey);\r\n\r\n\t\tthis.component = VueArrayControl;\r\n\t\tthis.props = { emitter, ikey, readonly };\r\n\t}\r\n\r\n\tpush_sample(val: any) {\r\n\t\tthis.vueContext.push_sample(val);\r\n\t}\r\n}\r\n","import { Control } from \"rete\";\r\n\r\nconst VueNumControl = {\r\n\tprops: ['readonly', 'emitter', 'ikey', 'getData', 'putData'],\r\n\ttemplate: '<div><input type=\"number\" :readonly=\"readonly\" :value=\"value\" @input=\"change($event)\" @dblclick.stop=\"\"/> <font color=\"white\"> {{this.ikey}} </font></div>',\r\n\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tvalue: 0,\r\n\t\t}\r\n\t},\r\n\r\n\tmethods: {\r\n\t\tchange(e: any) {\r\n\t\t\tthis.value = +e.target.value; // FIXME: why the unary plus?\r\n\t\t\tthis.update();\r\n\t\t},\r\n\r\n\t\tupdate() {\r\n\t\t\tif (this.ikey)\r\n\t\t\t\tthis.putData(this.ikey, this.value)\r\n\r\n\t\t\tthis.emitter.trigger('process');\r\n\t\t}\r\n\t},\r\n\r\n\tmounted() {\r\n\t\tthis.value = this.getData(this.ikey);\r\n\t}\r\n}\r\n\r\n\r\nexport default class NumberControl extends Control {\r\n\tcomponent: any;\r\n\tprops: any;\r\n\tvueContext: any;\r\n\r\n\tconstructor(emitter: any, ikey: string, readonly: boolean = false) {\r\n\t\tsuper(ikey);\r\n\r\n\t\tthis.component = VueNumControl;\r\n\t\tthis.props = { emitter, ikey, readonly };\r\n\t}\r\n\r\n\tsetValue(val: any) {\r\n\t\tthis.vueContext.value = val;\r\n\t}\r\n}","import { Control } from \"rete\";\r\n\r\nconst VueNumControl = {\r\n\tprops: ['readonly', 'emitter', 'ikey', 'getData', 'putData'],\r\n\ttemplate: '<input type=\"text\" :readonly=\"readonly\" :value=\"value\" @input=\"change($event)\" @dblclick.stop=\"\"/>',\r\n\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tvalue: \"\",\r\n\t\t}\r\n\t},\r\n\r\n\tmethods: {\r\n\t\tchange(e: any) {\r\n\t\t\tthis.value = e.target.value;\r\n\t\t\tthis.update();\r\n\t\t},\r\n\r\n\t\tupdate() {\r\n\t\t\tif (this.ikey)\r\n\t\t\t\tthis.putData(this.ikey, this.value)\r\n\r\n\t\t\tthis.emitter.trigger('process');\r\n\t\t}\r\n\t},\r\n\r\n\tmounted() {\r\n\t\tthis.value = this.getData(this.ikey);\r\n\t}\r\n}\r\n\r\n\r\nexport default class StringControl extends Control {\r\n\tcomponent: any;\r\n\tprops: any;\r\n\tvueContext: any;\r\n\r\n\tconstructor(emitter: any, ikey: string, readonly: boolean = false) {\r\n\t\tsuper(ikey);\r\n\r\n\t\tthis.component = VueNumControl;\r\n\t\tthis.props = { emitter, ikey, readonly };\r\n\t}\r\n\r\n\tsetValue(val: any) {\r\n\t\tthis.vueContext.value = val;\r\n\t}\r\n}","import { WindowManager } from \"./Utility/WindowManager\";\r\nimport { Sprite } from \"./Sprite\";\r\n\r\nexport interface dictionary<T> {\r\n\t[index: string]: T;\r\n}\r\n\r\nexport type load_callback = (sprite: Sprite) => void;\r\n\r\n/**\r\n * @interface ShaderBundle\r\n * \r\n * A simple shader bundle to contain the shaders in a program.\r\n */\r\nexport interface ShaderBundle {\r\n\tvertex: string[];\r\n\tfragment: string[];\r\n\r\n\tattributes?: string[];\r\n\tuniforms?: string[];\r\n}\r\n\r\n/**\r\n * @class Playground\r\n * \r\n * A simpole WebGL playground.\r\n */\r\nexport class Playground {\r\n\tgl: WebGLRenderingContext;\r\n\t\r\n\tprogram:    WebGLProgram;\r\n\tattributes: dictionary<number> = {};\r\n\tuniforms:   dictionary<WebGLUniformLocation> = {};\r\n\r\n\tsprite_quad_buffer: WebGLBuffer;\r\n\tsprite_quad_tex: WebGLBuffer;\r\n\r\n\t/**\r\n\t * @constructor\r\n\t * \r\n\t * Default constructor.\r\n\t * \r\n\t * @param {HTMLCanvasElement} element - The HTML canvas for rendering.\r\n\t * @param {ShaderBundle} [bundle] - A set of shaders to use instead of the defaults.\r\n\t * @throws {Error} Throws an error if the web browser does not allow for WebGL.\r\n\t */\r\n\tconstructor(element: HTMLCanvasElement, bundle?: ShaderBundle) {\r\n\t\tthis.gl = element.getContext(\"webgl\");\r\n\t\tif (!this.gl) {\r\n\t\t\tthrow new Error(\"Could not create a WebGL instance!\");\r\n\t\t}\r\n\r\n\t\t// Fix sizing\r\n\t\tthis.gl.canvas.width = this.gl.canvas.clientWidth;\r\n\t\tthis.gl.canvas.height = this.gl.canvas.clientHeight;\r\n\r\n\t\tthis.gl.clearColor(0.0, 0.0, 0.0, 1.0);\r\n\t\tthis.gl.clear(this.gl.COLOR_BUFFER_BIT);\r\n\r\n\t\t// Compile the shaders (custom)\r\n\t\tthis.program = this.gl.createProgram();\r\n\t\tif (bundle) {\r\n\t\t\t// Vertex shaders\r\n\t\t\tfor (let i = 0; i < bundle.vertex.length; ++i) {\r\n\t\t\t\tlet v = Shader.compile(this.gl, bundle.vertex[i], this.gl.VERTEX_SHADER);\r\n\t\t\t\tthis.gl.attachShader(this.program, v);\r\n\t\t\t}\r\n\r\n\t\t\t// Fragment shaders\r\n\t\t\tfor (let i = 0; i < bundle.vertex.length; ++i) {\r\n\t\t\t\tlet v = Shader.compile(this.gl, bundle.vertex[i], this.gl.FRAGMENT_SHADER);\r\n\t\t\t\tthis.gl.attachShader(this.program, v);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tthis.gl.attachShader(this.program, Shader.compile(this.gl, Shader.default_vertex, this.gl.VERTEX_SHADER));\r\n\t\t\tthis.gl.attachShader(this.program, Shader.compile(this.gl, Shader.default_fragment, this.gl.FRAGMENT_SHADER));\r\n\t\t}\r\n\r\n\t\t// Link the program\r\n\t\tthis.gl.linkProgram(this.program);\r\n\t\tif (!this.gl.getProgramParameter(this.program, this.gl.LINK_STATUS)) {\r\n\t\t\tthrow new Error('Unable to initialize the shader program: ' + this.gl.getProgramInfoLog(this.program));\r\n\t\t}\r\n\r\n\t\t// Get locations\r\n\t\tlet attribs, uniforms;\r\n\t\tif (bundle) {\r\n\t\t\tattribs  = bundle.attributes;\r\n\t\t\tuniforms = bundle.uniforms;\r\n\t\t} else {\r\n\t\t\tattribs  = Shader.default_attributes;\r\n\t\t\tuniforms = Shader.default_uniforms;\r\n\t\t}\r\n\r\n\t\t// Attributes\r\n\t\tfor (let attr of attribs) {\r\n\t\t\tthis.attributes[attr] = this.gl.getAttribLocation(this.program, attr);\r\n\t\t}\r\n\r\n\t\t// Uniforms\r\n\t\tfor (let uni of uniforms) {\r\n\t\t\tthis.uniforms[uni] = this.gl.getUniformLocation(this.program, uni);\r\n\t\t}\r\n\r\n\t\t// Fill the needed buffers\r\n\t\tthis.sprite_quad_buffer = this.gl.createBuffer();\r\n\t\tthis.sprite_quad_tex = this.gl.createBuffer();\r\n\r\n\t\t// Fill background\r\n\t\tthis.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.sprite_quad_buffer);\r\n\t\tthis.gl.bufferData(this.gl.ARRAY_BUFFER, new Float32Array([\r\n\t\t\t-1.0,  1.0,\r\n\t\t\t-1.0, -1.0,\r\n\t\t\t 1.0, -1.0,\r\n\t\t\t 1.0, -1.0,\r\n\t\t\t 1.0,  1.0,\r\n\t\t\t-1.0,  1.0\r\n\t\t]), this.gl.STATIC_DRAW);\r\n\r\n\t\tthis.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.sprite_quad_tex);\r\n\t\tthis.gl.bufferData(this.gl.ARRAY_BUFFER, new Float32Array([\r\n\t\t\t0.0, 0.0,\r\n\t\t\t0.0, 1.0,\r\n\t\t\t1.0, 1.0,\r\n\t\t\t1.0, 1.0,\r\n\t\t\t1.0, 0.0,\r\n\t\t\t0.0, 0.0\r\n\t\t]), this.gl.STATIC_DRAW);\r\n\t}\r\n\r\n\t/**\r\n\t * @function create_sprite\r\n\t * \r\n\t * @param {String} id - The unique identifier of the sprite.\r\n\t * @param {String} name - The name for the sprite.\r\n\t * @param {String} type - The type of sprite.\r\n\t * @param {String} path - The path to the image for the sprite.\r\n\t * @param {load_callback} cb - A callback to run after loading the sprite.\r\n\t * @returns {Sprite} - The newly created sprite.\r\n\t */\r\n\tcreate_sprite(id: string, name: string, type: string, path: string, cb: load_callback): Sprite {\r\n\t\tlet s = new Sprite(id, name, type);\r\n\t\tlet i = document.createElement(\"img\");\r\n\t\t\r\n\t\t// Allow for CORS images\r\n\t\ti.crossOrigin = \"anonymous\";\r\n\r\n\t\t// Load image data into the WebGL texture\r\n\t\ti.onload = () => {\r\n\t\t\tlet t = this.gl.createTexture();\r\n\t\t\tthis.gl.bindTexture(this.gl.TEXTURE_2D, t);\r\n\t\t\tthis.gl.texImage2D(this.gl.TEXTURE_2D, 0, this.gl.RGBA, this.gl.RGBA, this.gl.UNSIGNED_BYTE, i);\r\n\r\n\t\t\tthis.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_WRAP_S, this.gl.CLAMP_TO_EDGE);\r\n\t\t\tthis.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_WRAP_T, this.gl.CLAMP_TO_EDGE);\r\n\t\t\tthis.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_MIN_FILTER, this.gl.LINEAR);\r\n\t\t\tthis.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_MAG_FILTER, this.gl.LINEAR);\r\n\t\t\tthis.gl.generateMipmap(this.gl.TEXTURE_2D);\r\n\r\n\t\t\ts.set_texture(t);\r\n\t\t\tcb(s);\r\n\t\t};\r\n\r\n\t\t// Start the loading of the image\r\n\t\ti.src = WindowManager.origin() + \"/\" + path;\r\n\t\r\n\t\treturn s;\r\n\t}\r\n\r\n\t/**\r\n\t * @function draw\r\n\t * \r\n\t * Draws the given sprites in order.\r\n\t * \r\n\t * @param {Sprite[]} sprites - The sprites to draw.\r\n\t */\r\n\tdraw(sprites: Sprite[]): void {\r\n\t\tthis.gl.viewport(0, 0, this.gl.canvas.clientWidth, this.gl.canvas.clientHeight);\r\n\t\tthis.gl.clear(this.gl.COLOR_BUFFER_BIT);\r\n\t\tthis.gl.enable(this.gl.CULL_FACE);\r\n\t\tthis.gl.enable(this.gl.BLEND);\r\n\r\n\t\tthis.gl.blendFunc(this.gl.ONE, this.gl.ONE_MINUS_SRC_ALPHA);\r\n\r\n\t\tthis.gl.useProgram(this.program);\r\n\r\n\t\tfor (let index in sprites) {\r\n\t\t\tlet sprite = sprites[index];\r\n\r\n\t\t\t// Bind the texture\r\n\t\t\tthis.gl.bindTexture(this.gl.TEXTURE_2D, sprite.get_texture());\r\n\r\n\t\t\t// Set the scale\r\n\t\t\tlet scale = sprite.get_scale();\r\n\t\t\tthis.gl.uniform2f(this.uniforms[\"uScale\"], scale.x, scale.y);\r\n\r\n\t\t\t// Set the position\r\n\t\t\tlet pos = sprite.get_position();\r\n\t\t\tthis.gl.uniform2f(this.uniforms[\"uOffset\"], pos.x, pos.y);\r\n\r\n\t\t\t// Draw the coordinates\r\n\t\t\tthis.gl.enableVertexAttribArray(this.attributes[\"aVertexPosition\"]);\r\n\t\t\tthis.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.sprite_quad_buffer);\r\n\t\t\tthis.gl.vertexAttribPointer(this.attributes[\"aVertexPosition\"],\r\n\t\t\t\t2,             // size\r\n\t\t\t\tthis.gl.FLOAT, // type\r\n\t\t\t\tfalse,         // normalize\r\n\t\t\t\t0,             // stride\r\n\t\t\t\t0              // offset\r\n\t\t\t);\r\n\r\n\t\t\t// Draw the texture\r\n\t\t\tthis.gl.enableVertexAttribArray(this.attributes[\"aTextureCoordinate\"]);\r\n\t\t\tthis.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.sprite_quad_tex);\r\n\t\t\tthis.gl.vertexAttribPointer(this.attributes[\"aTextureCoordinate\"],\r\n\t\t\t\t2,\r\n\t\t\t\tthis.gl.FLOAT,\r\n\t\t\t\tfalse,\r\n\t\t\t\t0,\r\n\t\t\t\t0\r\n\t\t\t);\r\n\r\n\t\t\t// Actually draw\r\n\t\t\tthis.gl.drawArrays(this.gl.TRIANGLES, 0, 6);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport namespace Shader {\r\n\texport const default_attributes: string[] = [\r\n\t\t\"aVertexPosition\",\r\n\t\t\"aTextureCoordinate\"\r\n\t];\r\n\r\n\texport const default_uniforms: string[] = [\r\n\t\t\"uOffset\",\r\n\t\t\"uScale\",\r\n\t\t\"uTexture\"\r\n\t];\r\n\r\n\texport const default_vertex = `\r\n\t\tattribute vec2 aVertexPosition;\r\n\t\tattribute vec2 aTextureCoordinate;\r\n\r\n\t\tuniform vec2 uScale;\r\n\t\tuniform vec2 uOffset;\r\n\r\n\t\tvarying vec2 TexCoord0;\r\n\r\n\t\tvoid main() {\r\n\t\t\tgl_Position = vec4(aVertexPosition[0] * uScale[0] + uOffset[0], aVertexPosition[1] * uScale[1] + uOffset[1], 0.0, 1.0);\r\n\t\t\tTexCoord0 = aTextureCoordinate;\r\n\t\t}\r\n\t`;\r\n\r\n\texport const default_fragment = `\r\n\t\tprecision mediump float;\r\n\r\n\t\tuniform sampler2D uTexture;\r\n\t\tvarying vec2 TexCoord0;\r\n\r\n\t\tvoid main() {\r\n\t\t\t//gl_FragColor = vec4(TexCoord0, 0.0, 1.0);\r\n\t\t\tgl_FragColor = texture2D(uTexture, TexCoord0);\r\n\t\t}\r\n\t`;\r\n\r\n\texport function compile(gl: WebGLRenderingContext, code: string, type: number): WebGLShader {\r\n\t\tlet sha = gl.createShader(type);\r\n\t\t\r\n\t\tgl.shaderSource(sha, code);\r\n\t\tgl.compileShader(sha);\r\n\r\n\t\tif (!gl.getShaderParameter(sha, gl.COMPILE_STATUS)) {\r\n\t\t\tlet msg = \"Could not compile shader: \" + gl.getShaderInfoLog(sha);\r\n\t\t\t\r\n\t\t\tgl.deleteShader(sha);\r\n\t\t\tthrow new Error(msg);\r\n\t\t}\r\n\r\n\t\treturn sha;\r\n\t}\r\n}","import \"regenerator-runtime/runtime\";\r\n\r\n/* Wrapper for creating and handling Rete.js Editor*/\r\nimport Rete, { NodeEditor, Engine, Component, Node } from \"rete\";\r\n\r\n// Plugins\r\nimport AreaPlugin from \"rete-area-plugin\";\r\nimport CommentPlugin from \"rete-comment-plugin\";\r\nimport ConnectionPlugin from \"rete-connection-plugin\";\r\nimport ContextMenuPlugin from \"rete-context-menu-plugin\";\r\nimport HistoryPlugin from \"rete-history-plugin\";\r\nimport VueRenderPlugin from \"rete-vue-render-plugin\";\r\n\r\nexport default class ReteEditor {\r\n\tprivate raw_editor: NodeEditor;\r\n\tprivate raw_engine: Engine;\r\n\r\n\tconstructor(name = \"rete-editor@0.0.1\", container?: string | HTMLElement) {\r\n\t\tlet cont: HTMLElement;\r\n\r\n\t\tif (typeof container == \"string\")\r\n\t\t\tcont = document.querySelector<HTMLElement>(container);\r\n\t\telse\r\n\t\t\tcont = container;\r\n\r\n\t\tthis.raw_editor = new Rete.NodeEditor(name, cont);\r\n\t\tthis.raw_editor.use(AreaPlugin);\r\n\t\tthis.raw_editor.use(CommentPlugin);\r\n\t\tthis.raw_editor.use(ConnectionPlugin);\r\n\t\tthis.raw_editor.use(ContextMenuPlugin);\r\n\t\tthis.raw_editor.use(HistoryPlugin);\r\n\t\tthis.raw_editor.use(VueRenderPlugin);\r\n\r\n\t\tthis.raw_engine = new Rete.Engine(name);\r\n\t}\r\n\r\n\taddNode(node: Node) {\r\n\t\tthis.raw_editor.addNode(node);\r\n\t}\r\n\r\n\tclear() {\r\n\t\tthis.raw_editor.clear();\r\n\t}\r\n\r\n\tregister(component: Component) {\r\n\t\tthis.raw_editor.register(component);\r\n\t\tthis.raw_engine.register(component);\r\n\t}\r\n\r\n\tstart(events = \"process nodecreated noderemoved connectioncreated connectionremoved\") {\r\n\t\t// FIXME: Does not like events (even though tutorial says to use it this way)\r\n\t\tthis.raw_editor.on(<any>events, async () => {\r\n\t\t\tawait this.raw_engine.abort();\r\n\t\t\tawait this.raw_engine.process(this.raw_editor.toJSON());\r\n\t\t});\r\n\r\n\t\tthis.raw_editor.view.resize();\r\n\t\tAreaPlugin.zoomAt(this.raw_editor);\r\n\t\tthis.raw_editor.trigger(\"process\");\r\n\t}\r\n\r\n\tdestroy() {\r\n\t\tthis.raw_editor.destroy();\r\n\t\tthis.raw_engine.destroy();\r\n\r\n\t\tthis.raw_editor = undefined;\r\n\t\tthis.raw_engine = undefined;\r\n\t}\r\n\r\n\tasync process() {\r\n\t\tawait this.raw_engine.abort();\r\n\t\tawait this.raw_engine.process(this.raw_editor.toJSON());\r\n\t}\r\n\r\n\tget_editor() {\r\n\t\treturn this.raw_editor;\r\n\t}\r\n\r\n\tget_engine() {\r\n\t\treturn this.raw_engine;\r\n\t}\r\n}\r\n","import { WindowDeclaration, WindowManager } from \"./Utility/WindowManager\";\r\n\r\nexport interface Point {\r\n\tx: number;\r\n\ty: number;\r\n}\r\n\r\n/**\r\n * @class Sprite\r\n *\r\n * A sprite which has a position and an image. Sprite positions are exposed to the window for use\r\n * with Blockly.\r\n */\r\nexport class Sprite {\r\n\tid: string;\r\n\tname: string;\r\n\ttype: string;\r\n\r\n\ttexture: WebGLTexture;\r\n\tscale: Point;\r\n\r\n\tbinding: WindowDeclaration;\r\n\r\n\t/**\r\n\t * @constructor\r\n\t *\r\n\t * Default constructor.\r\n\t *\r\n\t * @param {string} id - The unique identifier of the sprite.\r\n\t * @param {string} name - The name of the sprite.\r\n\t * @param {string} type - The type of the sprite.\r\n\t * @param {string} depth - The Z depth\r\n\t *\r\n\t * @throws {Error} Throws an error if the sprite name is not unique.\r\n\t */\r\n\tconstructor(id: string, name: string, type: string) {\r\n\t\tthis.id = id;\r\n\t\tthis.name = name;\r\n\t\tthis.type = type;\r\n\t\tthis.scale = {x: 1, y: 1};\r\n\r\n\t\tthis.binding = WindowManager.declare(id, <Point>{x: 0, y: 0});\r\n\t}\r\n\r\n\t/**\r\n\t * @function delete\r\n\t *\r\n\t * Deletes a sprite and its bindings to the window.\r\n\t */\r\n\tdelete(): void {\r\n\t\tthis.id = undefined;\r\n\r\n\t\tthis.delete_texture();\r\n\t\tthis.binding.delete();\r\n\t}\r\n\r\n\tget_position(): Point {\r\n\t\treturn this.binding.get();\r\n\t}\r\n\r\n\tget_scale(): Point {\r\n\t\treturn this.scale;\r\n\t}\r\n\r\n\tget_texture(): WebGLTexture {\r\n\t\treturn this.texture;\r\n\t}\r\n\r\n\tset_position(p: Point): void {\r\n\t\tthis.binding.set(p);\r\n\t}\r\n\r\n\tset_texture(texture: WebGLTexture): void {\r\n\t\tthis.texture = texture;\r\n\t}\r\n\r\n\tdelete_texture(): void {\r\n\t\tdelete this.texture;\r\n\t}\r\n\r\n\tset_scale(p: Point): void {\r\n\t\tthis.scale = p;\r\n\t}\r\n}","/**\r\n * CustomBlock\r\n *\r\n *\r\n * A simple class for managing custom blocks in blockly. See\r\n * {@link https://developers.google.com/blockly/guides/configure/web/custom-blocks | here} for info on using either\r\n * JSON or JavaScript to define a custom block (or check out the example blocks defined in `src/Blocks`).\r\n *\r\n * @todo Add support for implicitly casting to string for use in modules\r\n *\r\n * @example\r\n * Using the JSON interface.\r\n * ```ts\r\n * Blockly.Msg.SOME_HUE = 180; // This is hue from HSV\r\n * let custom = new CustomBlock(\"example\", {\r\n *     message0: \"cool block\",\r\n *     args0: [],\r\n *     output: \"String\",\r\n *     colour: \"%{BKY_SOME_HUE}\",\r\n *     tooltip: \"Thanks for hovering!\",\r\n *     helpUrl: \"some/help/url\"\r\n * }, (block: Blockly.Block): (string | number)[] => {\r\n *     let example_code = \"JSON.stringify({ hello, \\\"world\\\" })\";\r\n *     return [example_code, Blockly.JavaScript.ORDER_MEMBER];\r\n * });\r\n * ```\r\n *\r\n * @example\r\n * Using the JavaScript interface.\r\n * ```ts\r\n * Blockly.Msg.EXAMPLE_HUE = 230; // This is hue from HSV\r\n * let custom = new CustomBlock(\"example_block\", (b: Blockly.Block) => {\r\n *     b.appendDummyInput(\"example_input\")\r\n *         .appendField(\"set\");\r\n *\r\n *     // Allow for connecting\r\n *     b.setNextStatement(true);\r\n *     b.setPreviousStatement(true);\r\n *\r\n *     b.setColour(Blockly.Msg.EXAMPLE_HUE);\r\n * };\r\n * ```\r\n */\r\nexport class CustomBlock {\r\n\tname: string;\r\n\r\n\t// Since blockly does not add a way to set a statement suffix...\r\n\tsuffix: string;\r\n\r\n\t/**\r\n\t * Dispose\r\n\t *\r\n\t * Destroys a custom block created by this class.\r\n\t *\r\n\t * @param name The unique name of the block to dispose. Same as the name specified on creation.\r\n\t * @param healStack Whether or not to attempt to heal holes caused by deleting the block.\r\n\t */\r\n\tstatic dispose(name: string, healStack: boolean) {\r\n\t\tif (Blockly.Blocks[name].dispose)\r\n\t\t\tBlockly.Blocks[name].dispose(healStack);\r\n\t\tdelete Blockly.Blocks[name];\r\n\r\n\t\tlet unsafe = (Blockly.JavaScript as any) as Blockly.dictionary<Blockly.generator_type>;\r\n\t\tdelete unsafe[name];\r\n\t}\r\n\r\n\t/**\r\n\t * Constructor\r\n\t *\r\n\t * Creates a new Custom blockly block. Fails if the requested name for the new\r\n\t * block is already in use.\r\n\t *\r\n\t * @param name The name to label the block.\r\n\t * @param def The definition information for the block.\r\n\t * @param generator The generator for the block.\r\n\t * @param suffix A command to run after execution of this custom block.\r\n\t */\r\n\tconstructor(name: string, def: (Blockly.block_def | ((block: Blockly.Block) => void)), generator: Blockly.generator_type, suffix?: string) {\r\n\t\tif (name in Blockly.Blocks)\r\n\t\t\tthrow new Error(\"Requested Block name is already in use: \" + name);\r\n\r\n\t\tthis.name = name;\r\n\t\tthis.suffix = suffix;\r\n\t\tBlockly.Blocks[name] = {\r\n\t\t\tinit: function() {\r\n\t\t\t\tif ((<Blockly.block_def>def).message0) {\r\n\t\t\t\t\tthis.jsonInit(def);\r\n\t\t\t\t} else {\r\n\t\t\t\t\t(<(b: Blockly.Block) => void>def)(<Blockly.Block>this);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t// Need to do this unsafe cast since JavaScript is both a map and a class...\r\n\t\tlet unsafe = (Blockly.JavaScript as any) as Blockly.dictionary<Blockly.generator_type>;\r\n\t\tif (name in unsafe)\r\n\t\t\tthrow new Error(\"Specified generator already defined: \" + name);\r\n\r\n\t\t// Create the generator\r\n\t\tunsafe[name] = <Blockly.generator_type>((b) => {\r\n\t\t\tlet r = generator(b);\r\n\r\n\t\t\tif (this.suffix) {\r\n\t\t\t\tif (r instanceof Array)\r\n\t\t\t\t\tr[0] += this.suffix;\r\n\t\t\t\telse\r\n\t\t\t\t\tr += this.suffix;\r\n\t\t\t}\r\n\r\n\t\t\treturn r;\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * block\r\n\t *\r\n\t * Returns the Blockly block representation of this custom block\r\n\t *\r\n\t * @return The block as a Blockly block\r\n\t */\r\n\tblock(): Blockly.Block {\r\n\t\treturn Blockly.Blocks[this.name];\r\n\t}\r\n\r\n\t/**\r\n\t * Suffix\r\n\t *\r\n\t * Blockly allows for an official way to add a pre-command before execution of a block. It does not\r\n\t * allow for running a post-command, so this is an attempt to add one.\r\n\t *\r\n\t * @param suffix A custom command to run after execution of this block.\r\n\t */\r\n\tset_suffix(suffix: string): void {\r\n\t\tthis.suffix = suffix;\r\n\t}\r\n\r\n\t/**\r\n\t * Dispose\r\n\t *\r\n\t * Destroys a custom block.\r\n\t *\r\n\t * @param healStack Whether or not to attempt to heal holes caused by deleting the block.\r\n\t */\r\n\tdispose(healStack: boolean): void {\r\n\t\tthis.block().dispose(healStack);\r\n\t}\r\n}","import { dictionary } from \"../Playground\";\r\nimport { Interpreter } from \"JS-Interpreter/acorn_interpreter\";\r\nimport { Point } from \"../Sprite\";\r\n\r\nconst NON_EVENT_INTERP = \"NON_EVENT_INTERP\";\r\nconst EVENT_INTERP = \"EVENT_INTERP\";\r\n\r\nexport interface ManagedInterpreter {\r\n  interp: Interpreter;\r\n  isNextStep: boolean;\r\n  type: string;\r\n}\r\n\r\n/**\r\n * InterpManager\r\n *\r\n * A class to manage multiple threads based on Neil Fraser's JS Interpreter example.\r\n * See {@link https://neil.fraser.name/software/JS-Interpreter/docs.html | this link for additional information}\r\n */\r\nexport class InterpManager {\r\n  interpreters: dictionary<Interpreter> = {};\r\n  sources: dictionary<string> = {};\r\n\r\n  handler: NodeJS.Timeout = null;\r\n  handlerDelay: number;\r\n\r\n  workspace: Blockly.Workspace;\r\n  api: any; // FIXME: Use type here\r\n  main_scope: object;\r\n\r\n  private MAIN = \"__MAIN__\";\r\n\r\n  /**\r\n   * Default InterpManager constructor\r\n   *\r\n   * @param workspace - Blockly parent workspace\r\n   * @param api - Interpreter API functions\r\n   * @param handlerDelay - The amount of time between each interpreter step. Defaults to 5 ms\r\n   */\r\n  constructor(\r\n    workspace: Blockly.Workspace,\r\n    api: any,\r\n    handlerDelay: number = 5\r\n  ) {\r\n    // Save the workspace and delay for use in the step function for each interpreter\r\n    this.workspace = workspace;\r\n    this.handlerDelay = handlerDelay;\r\n\r\n    // Keep references to the API for constructing the individual interpreters\r\n    this.api = api;\r\n  }\r\n\r\n  /**\r\n   * Has Next Step\r\n   *\r\n   * Returns whether or not this interpreter manager has any more steps to step through.\r\n   */\r\n  hasNextStep(): boolean {\r\n    return Object.keys(this.interpreters).length > 0;\r\n  }\r\n\r\n  step(): void {\r\n    let keys = Object.keys(this.interpreters);\r\n    for (let i = 0; i != keys.length; ++i) {\r\n      let interp = this.interpreters[keys[i]];\r\n\r\n      // Remove the interpreter if it no longer can step\r\n      if (!interp.step()) {\r\n        delete this.interpreters[keys[i]];\r\n      }\r\n    }\r\n  }\r\n\r\n  run(code: string, cb: () => void, should_block: boolean = false): void {\r\n    // Method for actually running each step of all interpreters\r\n    let do_run = () => {\r\n      if (this.hasNextStep()) {\r\n        this.step();\r\n        this.handler = setTimeout(do_run, this.handlerDelay);\r\n      } else {\r\n        this.handler = setTimeout(do_run, this.handlerDelay);\r\n        //cb();\r\n        //this.stop();\r\n      }\r\n    };\r\n\r\n    // Prepend all the code with event handling set-up lines\r\n    let blocks = this.workspace.getBlocksByType(\"event_keypress\", false);\r\n    let blocks_as_code = blocks.map(block => {\r\n      return Blockly.JavaScript.blockToCode(block);\r\n    });\r\n    code = `${blocks_as_code.join(\";\\n\")};\\n${code}`;\r\n\r\n    // Create the main interpreter code\r\n    console.log(\"CODE:\", code);\r\n    this.interpreters[this.MAIN] = this.createInterpreter(code, true);\r\n\r\n    // Store the global scope\r\n    this.main_scope = this.interpreters[this.MAIN].global;\r\n\r\n    // Loop forever if needed\r\n    if (should_block) {\r\n      this.interpreters[this.MAIN].appendCode(\"while (true);\");\r\n    }\r\n\r\n    // Create the event handler\r\n    window.onkeydown = (ev: KeyboardEvent) => {\r\n      let key = ev.keyCode;\r\n\r\n      if (key in this.sources) {\r\n        console.log(\"RUNNING SOURCE:\", this.sources[key]);\r\n        this.interpreters[key] = this.createInterpreter(this.sources[key]);\r\n      }\r\n    };\r\n\r\n    // Start the execution\r\n    do_run();\r\n  }\r\n\r\n  stop(): void {\r\n    clearTimeout(this.handler);\r\n\r\n    // Clear out the state data\r\n    this.interpreters = {};\r\n    this.sources = {};\r\n  }\r\n\r\n  /**\r\n   * Create Interpreter\r\n   *\r\n   * Creates an interpreter object\r\n   *\r\n   * @param code - The source code associated with the new interpreter\r\n   * @param is_main_thread - Whether or not to treat this as the main thread.\r\n   *                         Non-main threads will have their global scopes replaced with the main one.\r\n   *\r\n   * @returns New interpreter object set up with external API calls.\r\n   */\r\n  createInterpreter(\r\n    code: string,\r\n    is_main_thread: boolean = false\r\n  ): Interpreter {\r\n    let initAPI = (interpreter: Interpreter, scope: object) => {\r\n      // Add an API function for prompt / alert\r\n      interpreter.setProperty(\r\n        scope,\r\n        \"alert\",\r\n        interpreter.createNativeFunction((text: string) => {\r\n          return alert(text);\r\n        })\r\n      );\r\n\r\n      interpreter.setProperty(\r\n        scope,\r\n        \"prompt\",\r\n        interpreter.createNativeFunction((text: string) => {\r\n          return prompt(text);\r\n        })\r\n      );\r\n\r\n      // Add api call for event-based code\r\n      interpreter.setProperty(\r\n        scope,\r\n        \"__handle_event\",\r\n        interpreter.createNativeFunction(\r\n          (key_filter: string, root_id: string) => {\r\n            // If this event handler uses Blockly variables, tell the handler of the available variables\r\n            Blockly.JavaScript.variableDB_.setVariableMap(\r\n              this.workspace.getVariableMap()\r\n            );\r\n\r\n            // Load the source\r\n            this.sources[key_filter] = Blockly.JavaScript.statementToCode(\r\n              this.workspace.getBlockById(root_id),\r\n              \"keypress_input\",\r\n              Blockly.JavaScript.ORDER_NONE\r\n            );\r\n          }\r\n        )\r\n      );\r\n\r\n      // Add some api for Math\r\n      interpreter.setProperty(\r\n        scope,\r\n        \"__distance\",\r\n        interpreter.createNativeFunction((lhs: string, rhs: string) => {\r\n          let l = <Point>JSON.parse(lhs);\r\n          let r = <Point>JSON.parse(rhs);\r\n\r\n          return Math.hypot(l.x - r.x, l.y - r.y);\r\n        })\r\n      );\r\n\r\n      // Add any other API calls\r\n      let api_keys = Object.keys(this.api);\r\n      for (let i = 0; i != api_keys.length; ++i) {\r\n        let ap = this.api[api_keys[i]];\r\n\r\n        interpreter.setProperty(\r\n          scope,\r\n          api_keys[i],\r\n          interpreter.createNativeFunction(function(...args: any) {\r\n            return ap(...args);\r\n          })\r\n        );\r\n      }\r\n\r\n      // Add an API function for referencing the sessionStorage\r\n      // TODO: Add the following to the constructor in main.ts\r\n      interpreter.setProperty(\r\n        scope,\r\n        \"__windowssSetItem\",\r\n        interpreter.createNativeFunction((id: string, val: string) => {\r\n          return window.sessionStorage.setItem(id, val);\r\n        })\r\n      );\r\n\r\n      interpreter.setProperty(\r\n        scope,\r\n        \"__windowssGetItem\",\r\n        interpreter.createNativeFunction((id: string) => {\r\n          return window.sessionStorage.getItem(id);\r\n        })\r\n      );\r\n    };\r\n\r\n    // Create the interpreter\r\n    let interp = new Interpreter(code, initAPI);\r\n\r\n    // Replace its global scope if it isn't the main thread\r\n    if (!is_main_thread) {\r\n      // Save the main scope, otherwise apply the global scope to\r\n      // all subsequent threads\r\n      interp.stateStack[0].scope = this.main_scope;\r\n    }\r\n\r\n    return interp;\r\n  }\r\n}\r\n","//-----------------------------------------------------\r\n// Exported members\r\n//-----------------------------------------------------\r\n\r\nexport type module_type = (string | Category | Label | Button | Separator)[];\r\n\r\n/**\r\n * @interface Label\r\n *\r\n * A simple label for Blockly.\r\n */\r\nexport interface Label {\r\n\ttext: string;\r\n}\r\n\r\n/**\r\n * @interface Seperator\r\n *\r\n * A simple separator.\r\n */\r\nexport interface Separator {\r\n\tgap: number;\r\n}\r\n\r\n/**\r\n * @interface Button\r\n *\r\n * A simple button for Blockly.\r\n */\r\nexport interface Button {\r\n\ttext: string;\r\n\tcallbackKey: string;\r\n}\r\n\r\n/**\r\n * @interface Category\r\n *\r\n * A {Blockly.Toolbox} category. Can be passed into a Toolbox in order to categorize blocks\r\n * under a single namespace. The colour option is an HSV number.\r\n */\r\nexport interface Category {\r\n\tname: string;\r\n\r\n\tcolour?: number | string;\r\n\tcustom?: \"VARIABLE\" | \"PROCEDURE\" | string;\r\n\r\n\tmodules: module_type;\r\n}\r\n\r\n/**\r\n * @class Toolbox\r\n *\r\n * A simple wrapper for Blockly's Toolbox\r\n */\r\nexport class Toolbox {\r\n\tmodules: module_type;\r\n\r\n\t/**\r\n\t * @constructor\r\n\t *\r\n\t * Generates a toolbox with the given modules. The supplied modules can either be\r\n\t * module names themselves or Categories with submodules.\r\n\t *\r\n\t * @param {module_type} modules - The modules to load.\r\n\t */\r\n\tconstructor(modules: module_type) {\r\n\t\tthis.modules = modules;\r\n\t}\r\n\r\n\t/**\r\n\t * @function toString\r\n\t *\r\n\t * Returns a string representation of the toolbox XML needed by {Blockly.Toolbox}\r\n\t *\r\n\t * @returns {string} Returns the XML tree as a string\r\n\t */\r\n\ttoString(): string {\r\n\t\tlet res: string = \"<xml style=\\\"display: none;\\\">\";\r\n\r\n\t\tres += unwind(this.modules);\r\n\t\tres += \"</xml>\";\r\n\r\n\t\treturn res;\r\n\t}\r\n}\r\n\r\n//-----------------------------------------------------\r\n// File-level functions\r\n//-----------------------------------------------------\r\n\r\n// Attempts to build an XML string from a given list of Modules or Categories.\r\nexport function unwind(arg: module_type, prepend_xml: boolean = false): string {\r\n\tlet res = (prepend_xml) ? \"<xml>\" : \"\";\r\n\r\n\tlet cur: any;\r\n\tfor (let what of arg) {\r\n\t\tif ((<Category>what).modules) {\r\n\t\t\t// The argument is a category\r\n\t\t\tcur = <Category>what;\r\n\r\n\t\t\t// Create the category header\r\n\t\t\tres += \"<category name=\\\"\" + cur.name + \"\\\" colour=\\\"\" + cur.colour + \"\\\"\";\r\n\r\n\t\t\t// Aloow for custom category types\r\n\t\t\tif (cur.custom) {\r\n\t\t\t\tres += \" custom=\\\"\" + cur.custom + \"\\\"\";\r\n\t\t\t}\r\n\r\n\t\t\tres += \">\";\r\n\t\t\tres += unwind(cur.modules);\r\n\r\n\t\t\t// Close the category\r\n\t\t\tres += \"</category>\"\r\n\r\n\t\t} else if ((<Button>what).callbackKey) {\r\n\t\t\t// The argument is a button\r\n\t\t\tcur = <Button>what;\r\n\r\n\t\t\tres += `<button text=\"${cur.text}\" callbackKey=\"${cur.callbackKey}\"></button>`;\r\n\r\n\t\t} else if ((<Label>what).text) {\r\n\t\t\t// The argument is a label\r\n\t\t\tcur = <Label>what;\r\n\r\n\t\t\tres += \"<label text=\\\"\" + cur.text + \"\\\"></label>\";\r\n\r\n\t\t} else if ((<Separator>what).gap !== undefined) {\r\n\t\t\t// The argument is a separator\r\n\t\t\tcur = <Separator>what;\r\n\r\n\t\t\tres += \"<sep gap=\\\"\" + cur.gap + \"\\\"></sep>\";\r\n\r\n\t\t} else {\r\n\t\t\t// The argument is a block\r\n\t\t\tres += \"<block type=\\\"\" + what + \"\\\"></block>\";\r\n\t\t}\r\n\t}\r\n\r\n\tif (prepend_xml) res += \"</xml>\";\r\n\r\n\treturn res;\r\n}","/**\r\n * @class WindowDeclaration\r\n *\r\n * A simple wrapper for declaring window-level variables\r\n */\r\nexport class WindowDeclaration {\r\n\tname: string;\r\n\r\n\t/**\r\n\t * @constructor\r\n\t *\r\n\t * Default constructor\r\n\t *\r\n\t * @param {String} name - The window-level binding.\r\n\t * @param {Any} val - The value to store.\r\n\t */\r\n\tconstructor(name: string, val?: any) {\r\n\t\tthis.name = name;\r\n\r\n\t\tif (val || window.sessionStorage.getItem(name) == undefined)\r\n\t\t\twindow.sessionStorage.setItem(this.name, val !== null ? JSON.stringify(val) : null);\r\n\t}\r\n\r\n\t/**\r\n\t * @function delete\r\n\t *\r\n\t * Deletes a window binding.\r\n\t */\r\n\tdelete(): void {\r\n\t\twindow.sessionStorage.removeItem(this.name);\r\n\t}\r\n\r\n\t/**\r\n\t * @function get\r\n\t *\r\n\t * Returns the value of the window-level variable.\r\n\t *\r\n\t * @returns {Any} The value associated with the binding.\r\n\t */\r\n\tget(): any {\r\n\t\treturn JSON.parse(window.sessionStorage.getItem(this.name));\r\n\t}\r\n\r\n\t/**\r\n\t * @function set\r\n\t *\r\n\t * Sets the value of the window-level variable.\r\n\t *\r\n\t * @param {Any} val - The value to save\r\n\t */\r\n\tset(val: any) {\r\n\t\twindow.sessionStorage.setItem(this.name, JSON.stringify(val));\r\n\t}\r\n\r\n\t/**\r\n\t * @function toGetterBinding\r\n\t *\r\n\t * Returns a getter binding reference to eval().\r\n\t *\r\n\t * @returns {string} The binding reference.\r\n\t */\r\n\ttoGetterBinding(): string {\r\n\t\treturn \"__windowssGetItem(\\\"\" + this.name + \"\\\")\";\r\n\t}\r\n\r\n\tstatic asGetterBinding(name: string): string {\r\n\t\treturn \"__windowssGetItem(\\\"\" + name + \"\\\")\";\r\n\t}\r\n\r\n\tstatic asSetterBinding(name: string): string {\r\n\t\treturn \"__windowssSetItem(\\\"\" + name + \"\\\", \";\r\n\t}\r\n}\r\n\r\n/**\r\n * @class WindowManager\r\n *\r\n * A simple (static) window interface for not directly manipulating the window.\r\n */\r\nexport class WindowManager {\r\n\t/**\r\n\t * @function eById\r\n\t *\r\n\t * Gets an element from the DOM by its associated ID.\r\n\t *\r\n\t * @param {string} id - The DOM ID.\r\n\t * @returns {HTMLElement} The element corresponding to that ID.\r\n\t * @throws {Error} Throws an error if the specified ID does not exist.\r\n\t */\r\n\tstatic eById(id: string): HTMLElement {\r\n\t\tlet res = document.getElementById(id);\r\n\t\tif (res == null)\r\n\t\t\tthrow new Error(\"Could not find element with ID: \" + id);\r\n\r\n\t\treturn res;\r\n\t}\r\n\r\n\t/**\r\n\t * @function declare\r\n\t *\r\n\t * Declares a new window-level variable.\r\n\t *\r\n\t * @param {string} name - The name of the variable to declare.\r\n\t * @param {Any} val - The value to assign to that variable.\r\n\t *\r\n\t * @returns {WindowDeclaration} The declared variable.\r\n\t * @throws {Error} Throws an error if the window-level name exists.\r\n\t */\r\n\tstatic declare(name: string, val?: any): WindowDeclaration {\r\n\t\tif (window.sessionStorage.getItem(name) !== null) {\r\n\t\t\tthrow new Error(\"Window attribute already declared: \" + name);\r\n\t\t}\r\n\r\n\t\treturn new WindowDeclaration(name, val);\r\n\t}\r\n\r\n\t/**\r\n\t * @function fetch\r\n\t *\r\n\t * Fetches a window declaration by name.\r\n\t *\r\n\t * @param {string} name - The name fo the declared variable\r\n\t *\r\n\t * @return {WindowDeclaration} The declaration that matches the name.\r\n\t * @throws {Error} Throws an error if the window-level name does not exist.\r\n\t */\r\n\tstatic fetch(name: string): WindowDeclaration {\r\n\t\tif (window.sessionStorage.getItem(name) == undefined) {\r\n\t\t\tthrow new Error(\"Window attribute not defined: \" + name);\r\n\t\t}\r\n\r\n\t\treturn new WindowDeclaration(name);\r\n\t};\r\n\r\n\t/**\r\n\t * @function origin\r\n\t *\r\n\t * Returns the origin of the web page.\r\n\t *\r\n\t * @return {string} The origin of the web page\r\n\t */\r\n\tstatic origin(): string {\r\n\t\tlet p = location.href.split('/');\r\n\t\tdelete p[p.length - 1];\r\n\r\n\t\treturn p.join('/');\r\n\t}\r\n\r\n\t/**\r\n\t * @function clear\r\n\t *\r\n\t * Clears the window-level variables.\r\n\t */\r\n\tstatic clear(): void {\r\n\t\twindow.sessionStorage.clear();\r\n\t}\r\n}","\nimport bciDeviceComponent from \"./Components/bciDevice.component\";\nimport averageBandPowerRangeComponent from \"./Components/averageBandPowerRange.component\";\nimport signalBandPowerRangeComponent from \"./Components/signalBandPowerRange.component\";\nimport blocklyEndComponent from \"./Components/blocklyEnd.component\";\nimport displayComponent from \"./Components/display.component\";\nimport graphComponent from \"./Components/graph.component\";\nimport bufferComponent from \"./Components/buffer.component\";\nimport numberComponent from \"./Components/number.component\";\nimport stringComponent from \"./Components/string.component\";\n\n\nlet components = {\n  bciDeviceComponent: bciDeviceComponent,\n  averageBandPowerRangeComponent: averageBandPowerRangeComponent,\n  signalBandPowerRangeComponent: signalBandPowerRangeComponent,\n  blocklyEndComponent: blocklyEndComponent,\n  displayComponent: displayComponent,\n  graphComponent: graphComponent,\n  bufferComponent: bufferComponent,\n  numberComponent: numberComponent,\n  stringComponent: stringComponent,\n\n};\n\nexport default components;\n","export default {\r\n\tLOCALE: \"EN\",\r\n\r\n\tpaths: {\r\n\t\tbackground: \"media/background3.png\",\r\n\t\tamoeba: \"media/players/amoeba.png\",\r\n\t\tbacteria: \"media/players/green-bacteria.png\",\r\n\t\tshrimp: \"media/players/shrimp.png\"\r\n\t}\r\n};\r\n","import {Chart, ChartDataSets} from \"chart.js\";\r\nimport {WindowDeclaration, WindowManager} from \"./Utility/WindowManager\";\r\n\r\n// Alpha transparency component in hex\r\nconst alpha_component = \"88\";\r\n\r\n// Maximum sliding window size\r\nconst WINDOW_SIZE = 64;\r\n\r\n/**\r\n * @class Graph\r\n *\r\n * A simple {Chart} wrapper with dynamic dataset handles.\r\n */\r\nexport class Graph {\r\n\tctx: CanvasRenderingContext2D;\r\n\tdeclarations: Array<WindowDeclaration>;\r\n\tchart: Chart;\r\n\r\n\t/**\r\n\t * @constructor\r\n\t *\r\n\t * Creates a {Chart} with dynamic handles to datasets.\r\n\t *\r\n\t * @param {String} id - The ID of the canvas to bind to.\r\n\t * @param {String[]} datasets - An array of names of window declarations to use as datasets.\r\n\t * @param {String[]} colors - The colors to use on each dataset.\r\n\t */\r\n\tconstructor(id: string, datasets: Array<string>, colors: Array<string>) {\r\n\t\tthis.ctx = (<HTMLCanvasElement>document.getElementById(id)).getContext('2d');\r\n\t\tthis.declarations = datasets.map(name => WindowManager.fetch(name));\r\n\r\n\t\tlet ds = datasets.map((name, index) => {\r\n\t\t\tlet cap = name[0].toLocaleUpperCase() + name.substr(1);\r\n\t\t\treturn <ChartDataSets>{\r\n\t\t\t\tlabel: cap,\r\n\t\t\t\txLabels: Array.apply(null, {length: WINDOW_SIZE}).map(Number.call, Number),\r\n\t\t\t\tdata: [],\r\n\t\t\t\tbackgroundColor: colors[index] + alpha_component\r\n\t\t\t};\r\n\t\t});\r\n\r\n\t\tthis.chart = new Chart(this.ctx, {\r\n\t\t\ttype: 'line',\r\n\t\t\tdata: {\r\n\t\t\t\tdatasets: ds\r\n\t\t\t},\r\n\t\t\toptions: {\r\n\t\t\t\tscales: {\r\n\t\t\t\t\txAxes: [{\r\n\t\t\t\t\t\ttype: \"category\",\r\n\t\t\t\t\t\t// labels: []\r\n\t\t\t\t\t}],\r\n\t\t\t\t\tyAxes: [{\r\n\t\t\t\t\t\tticks: {\r\n\t\t\t\t\t\t\tbeginAtZero: true,\r\n\t\t\t\t\t\t\tmin: 0,\r\n\t\t\t\t\t\t\tmax: 1\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}]\r\n\t\t\t\t},\r\n\t\t\t\tresponsive: true,\r\n\t\t\t\tmaintainAspectRatio: false\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tupdate() {\r\n\t\tlet dec = this.declarations;\r\n\t\tthis.chart.data.datasets.forEach((ds, index) => {\r\n\t\t\tlet data = dec[index].get();\r\n\t\t\tif (data.length == 0)\r\n\t\t\t\treturn;\r\n\r\n\t\t\t(<number[]>ds.data).push(...dec[index].get());\r\n\t\t\tif (ds.data.length > WINDOW_SIZE)\r\n\t\t\t\tds.data.splice(0, ds.data.length - WINDOW_SIZE - 1);\r\n\t\t\t\t// ds.data = ds.data.slice(ds.data.length - WINDOW_SIZE - 1);\r\n\t\t});\r\n\r\n\t\tthis.chart.update(<any>0);\r\n\t}\r\n};\r\n\r\nexport default Graph;","import { locale } from \"./type_def\";\r\n\r\nlet messages: locale = {\r\n\tbci: {\r\n\t\tblock: \"BCI\",\r\n\t\ttooltip: \"The corresponding brain frequency.\",\r\n\r\n\t\talpha: \"Alpha\",\r\n\t\tbeta: \"Beta\",\r\n\t\ttheta: \"Theta\",\r\n\t\tdelta: \"Delta\",\r\n\t\tgamma: \"Gamma\",\r\n\r\n\t\tengagement: \"Engagement\"\r\n\t},\r\n\tbluetooth: {\r\n\t\terror: {\r\n\t\t\tconnection: \"Could not connect...\"\r\n\t\t}\r\n\t},\r\n\tcategory: {\r\n\t\tbci: \"BCI\",\r\n\t\tevents: \"Events\",\r\n\t\tflow: \"Flow\",\r\n\t\tloops: \"Loops\",\r\n\t\tlogic: \"Logic\",\r\n\t\tmath: \"Math\",\r\n\t\tplayers: \"Players\",\r\n\t\ttext: \"Text\",\r\n\t\tvariables: \"Variables\"\r\n\t},\r\n\tflow: {\r\n\t\tadd: \"Add Flow Block\",\r\n\t\talready_exists: (name: string) =>\r\n\t\t\t`A flow block named '${name}' already exists.`,\r\n\t\tprompt: \"New flow block name\",\r\n\t\ttooltip: \"A flow component. Click the gear to edit me.\"\r\n\t},\r\n\tplayer: {\r\n\t\tcreate: \"Create a player\",\r\n\t\tnew: \"New Player Name\",\r\n\t\tnone: \"No available players\",\r\n\r\n\t\tamoeba: \"Amoeba\",\r\n\t\tbacteria: \"Bacteria\"\r\n\t},\r\n\thelp: {\r\n\t\tno_players: \"There aren't any players. Press the + to add one!\"\r\n\t},\r\n\r\n\tevents: {\r\n\t\tkeypress: \"On Keypress\",\r\n\t\tkeys: {\r\n\t\t\t\"32\": \"Space\",\r\n\t\t\t\"38\": \"Up Arrow\",\r\n\t\t\t\"40\": \"Down Arrow\",\r\n\t\t\t\"39\": \"Right Arrow\",\r\n\t\t\t\"37\": \"Left Arrow\",\r\n\t\t\t\"48\": \"0\",\r\n\t\t\t\"49\": \"1\",\r\n\t\t\t\"50\": \"2\",\r\n\t\t\t\"51\": \"3\",\r\n\t\t\t\"52\": \"4\",\r\n\t\t\t\"53\": \"5\",\r\n\t\t\t\"54\": \"6\",\r\n\t\t\t\"55\": \"7\",\r\n\t\t\t\"56\": \"8\",\r\n\t\t\t\"57\": \"9\",\r\n\t\t\t\"65\": \"A\",\r\n\t\t\t\"66\": \"B\",\r\n\t\t\t\"67\": \"C\",\r\n\t\t\t\"68\": \"D\",\r\n\t\t\t\"69\": \"E\",\r\n\t\t\t\"70\": \"F\",\r\n\t\t\t\"71\": \"G\",\r\n\t\t\t\"72\": \"H\",\r\n\t\t\t\"73\": \"I\",\r\n\t\t\t\"74\": \"J\",\r\n\t\t\t\"75\": \"K\",\r\n\t\t\t\"76\": \"L\",\r\n\t\t\t\"77\": \"M\",\r\n\t\t\t\"78\": \"N\",\r\n\t\t\t\"79\": \"O\",\r\n\t\t\t\"80\": \"P\",\r\n\t\t\t\"81\": \"Q\",\r\n\t\t\t\"82\": \"R\",\r\n\t\t\t\"83\": \"S\",\r\n\t\t\t\"84\": \"T\",\r\n\t\t\t\"85\": \"U\",\r\n\t\t\t\"86\": \"V\",\r\n\t\t\t\"87\": \"W\",\r\n\t\t\t\"88\": \"X\",\r\n\t\t\t\"89\": \"Y\",\r\n\t\t\t\"90\": \"Z\"\r\n\t\t}\r\n\t}\r\n};\r\n\r\nexport default messages;\r\n","import { locale } from \"./type_def\";\r\nimport en from \"./en.i18n\";\r\n\r\n/**\r\n * Set Locale\r\n *\r\n * Sets the locale of the program. See {@link type_def} for info on how to structure language files.\r\n *\r\n * Make sure to add to the switch statement below when you add a new language set.\r\n *\r\n * @param locale_code The {@link https://en.wikipedia.org/wiki/Language_code | language code} for the language to use.\r\n */\r\nexport function set_locale(locale_code: string): locale {\r\n\tswitch (locale_code.toLocaleLowerCase()) {\r\n\t\tcase \"en\":\r\n\t\t\treturn en;\r\n\t\tdefault:\r\n\t\t\tthrow new Error(\"Locale not found: \" + locale_code);\r\n\t}\r\n}","// main.ts\r\n// -------\r\n// Main entry point for this web application\r\n\r\n// =============================================================================\r\n// Imports\r\n// =============================================================================\r\nimport { WindowManager } from \"./Utility/WindowManager\";\r\nimport { InterpManager } from \"./Utility/InterpManager\";\r\nimport { Toolbox, Category, Separator } from \"./Utility/Toolbox\";\r\nimport { Playground, dictionary } from \"./Playground\";\r\nimport { Sprite, Point } from \"./Sprite\";\r\nimport { Interpreter } from \"JS-Interpreter/acorn_interpreter\";\r\n\r\n// Custom blocks\r\nimport { Device, BCICategory } from \"./Blocks/BCIBlocks\";\r\nimport { EventCategory } from \"./Blocks/EventBlocks\";\r\nimport {\r\n\tFlowCategory,\r\n\tAddFlowBlock,\r\n\tFlowCategoryCallback,\r\n\tflow_window_list,\r\n\tflow_window_type,\r\n\tFlowMutator,\r\n\tflow_block,\r\n\tflow_block_data,\r\n\tget_flow_api\r\n} from \"./Blocks/FlowBlocks\";\r\nimport {\r\n\tPlayerCategory,\r\n\tplayer_window_list,\r\n\tplayer_list_type,\r\n\tPlayerCategoryCallback,\r\n\tPlayerSet,\r\n\tplayer_list_item,\r\n\tPlayerUpdateX,\r\n\tPlayerUpdateY\r\n} from \"./Blocks/PlayerBlocks\";\r\n\r\n// Configuration\r\nimport config from \"./config\";\r\n\r\n// Import language\r\nimport * as i18n from \"./i18n/i18n\";\r\nimport { DeviceState } from \"bci-device\";\r\nlet locale = i18n.set_locale(config.LOCALE);\r\n\r\n// Charting\r\nimport Graph from \"./graph\";\r\nimport { CustomBlock } from \"./Utility/CustomBlock\";\r\nlet g = new Graph(\"graph\", [\"flow_data\"], [\"#ffe119\"]);\r\nsetInterval(() => g.update(), 100);\r\n\r\n// =============================================================================\r\n// Initial set up\r\n// =============================================================================\r\n// References to window elements\r\nlet blockly_div = WindowManager.eById(\"workspace\");\r\nlet code_div = WindowManager.eById(\"codeText\");\r\nlet webgl_div = <HTMLCanvasElement>WindowManager.eById(\"webgl\");\r\n\r\n// Highligh blocks\r\nBlockly.JavaScript.STATEMENT_PREFIX = \"__highlightBlock(%1);\\n\";\r\nBlockly.JavaScript.addReservedWords(\"__highlightBlock\");\r\n\r\n// =============================================================================\r\n// WebGL set up\r\n// =============================================================================\r\n// Set up WebGL\r\nlet playground = new Playground(webgl_div);\r\nlet players: dictionary<Sprite> = {};\r\n\r\n// Players\r\nlet background = playground.create_sprite(\r\n\t\"__background\",\r\n\t\"__background\",\r\n\t\"background\",\r\n\tconfig.paths.background,\r\n\t() => __drawFrame()\r\n);\r\nplayers[\"__background\"] = background;\r\n\r\n// Draw\r\nBlockly.JavaScript.addReservedWords(\"__drawFrame\");\r\n\r\n// Draw all sprites\r\nfunction __drawFrame() {\r\n\treturn new Promise(resolve => {\r\n\t\tplayground.draw(Object.values(players));\r\n\t\tresolve(\"Drawn\");\r\n\t});\r\n}\r\n\r\n// Set up the player blocks to draw after\r\nPlayerSet.set_suffix(\"__drawFrame();\\n\");\r\nPlayerUpdateX.set_suffix(\"__drawFrame();\\n\");\r\nPlayerUpdateY.set_suffix(\"__drawFrame();\\n\");\r\n\r\n// =============================================================================\r\n// Mouse interactions for playground\r\n// =============================================================================\r\n// Set up mouse events\r\nlet trash = WindowManager.eById(\"canvas-trash\");\r\nlet mouse = { point: { x: 0, y: 0 }, down: false, shouldDelete: false };\r\nlet selected = \"\";\r\nwebgl_div.onmousedown = (event: MouseEvent) => {\r\n\tmouse.down = true;\r\n};\r\nwebgl_div.onmouseup = (event: MouseEvent) => {\r\n\tmouse.down = false;\r\n\r\n\tlet delete_modal = WindowManager.eById(\"delete-modal\");\r\n\tif (mouse.shouldDelete) {\r\n\t\tdelete_modal.click();\r\n\r\n\t\ttrash.style.color = \"white\";\r\n\t\ttrash.style.transform = \"scale(1, 1)\";\r\n\t\ttrash.style.right = \"-1em\";\r\n\t\tmouse.shouldDelete = false;\r\n\t}\r\n};\r\nwebgl_div.onmousemove = (event: MouseEvent) => {\r\n\tlet bounds = webgl_div.getBoundingClientRect();\r\n\tlet in_range = (val: number, ref: number, range: number) =>\r\n\t\tval > ref - range && val < ref + range;\r\n\r\n\t// FIXME: Figure out why there is a 64 pixel offset\r\n\tmouse.point = {\r\n\t\tx: (event.clientX / bounds.width) * 2 - 1.0,\r\n\t\ty: ((event.clientY - 64) / bounds.height) * -2 + 1.0\r\n\t};\r\n\r\n\t// Move if selected\r\n\tif (mouse.down) {\r\n\t\tif (selected === \"\") return;\r\n\r\n\t\tplayers[selected].set_position(mouse.point);\r\n\t\tlet windows = <player_list_type>player_window_list.get();\r\n\t\tlet find_player = (id: string) => {\r\n\t\t\tfor (let i = 0; i != windows.length; ++i) {\r\n\t\t\t\tif (windows[i][1] == id) return windows[i];\r\n\t\t\t}\r\n\r\n\t\t\tthrow \"PLAYER NOT FOUND: \" + name;\r\n\t\t};\r\n\r\n\t\tlet found = find_player(selected);\r\n\t\tfound[2] = mouse.point;\r\n\t\tplayer_window_list.set(windows);\r\n\r\n\t\t// Draw\r\n\t\t__drawFrame();\r\n\r\n\t\t// Define the trash region as being in [0.85, 0.95], [-0.85, -0.95]\r\n\t\tif (\r\n\t\t\tin_range(mouse.point.x, 0.9, 0.05) &&\r\n\t\t\tin_range(mouse.point.y, -0.9, 0.06)\r\n\t\t) {\r\n\t\t\ttrash.style.transform = \"scale(1.1, 1.1)\";\r\n\t\t\ttrash.style.color = \"red\";\r\n\t\t\tmouse.shouldDelete = true;\r\n\t\t} else {\r\n\t\t\ttrash.style.color = \"white\";\r\n\t\t\ttrash.style.transform = \"scale(1, 1)\";\r\n\t\t\tmouse.shouldDelete = false;\r\n\t\t}\r\n\t} else {\r\n\t\tlet show_cursor = false;\r\n\t\tfor (let player in players) {\r\n\t\t\tif (player == \"__background\") continue;\r\n\r\n\t\t\tlet pos = players[player].get_position();\r\n\t\t\tif (\r\n\t\t\t\tin_range(mouse.point.x, pos.x, 0.1) &&\r\n\t\t\t\tin_range(mouse.point.y, pos.y, 0.1)\r\n\t\t\t) {\r\n\t\t\t\tshow_cursor = true;\r\n\t\t\t\tselected = player;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (!show_cursor) {\r\n\t\t\ttrash.style.right = \"-1em\";\r\n\t\t\tselected = \"\";\r\n\t\t} else {\r\n\t\t\ttrash.style.right = \"0\";\r\n\t\t\tWindowManager.eById(\"selected-player\").innerHTML = players[selected].name;\r\n\t\t}\r\n\r\n\t\twebgl_div.style.cursor = show_cursor ? \"pointer\" : \"default\";\r\n\t}\r\n};\r\n\r\n// =============================================================================\r\n// Blockly workspace set up\r\n// =============================================================================\r\n// Set up toolbox categories\r\nlet cat_loops: Category = {\r\n\tname: locale.category.loops,\r\n\tcolour: \"%{BKY_LOOPS_HUE}\",\r\n\r\n\tmodules: [\"controls_whileUntil\", \"controls_repeat_ext\", \"controls_repeat\"]\r\n};\r\n\r\nlet cat_text: Category = {\r\n\tname: locale.category.text,\r\n\tcolour: \"%{BKY_TEXTS_HUE}\",\r\n\r\n\tmodules: [\"text\", \"text_print\"]\r\n};\r\n\r\nlet cat_logic: Category = {\r\n\tname: locale.category.logic,\r\n\tcolour: \"%{BKY_LOGIC_HUE}\",\r\n\r\n\tmodules: [\r\n\t\t\"controls_if\",\r\n\t\t\"logic_compare\",\r\n\t\t\"logic_operation\",\r\n\t\t\"logic_negate\",\r\n\t\t\"logic_boolean\",\r\n\t\t\"logic_ternary\"\r\n\t]\r\n};\r\n\r\nlet cat_math: Category = {\r\n\tname: locale.category.math,\r\n\tcolour: \"%{BKY_MATH_HUE}\",\r\n\r\n\tmodules: [\r\n\t\t\"math_number\",\r\n\t\t\"math_single\",\r\n\t\t\"math_round\",\r\n\t\t\"math_trig\",\r\n\t\t\"math_constrain\",\r\n\t\t\"math_arithmetic\",\r\n\t\t\"math_modulo\",\r\n\t\t\"math_random_int\"\r\n\t]\r\n};\r\n\r\nlet cat_vars: Category = {\r\n\tname: locale.category.variables,\r\n\tcolour: 330,\r\n\tcustom: \"VARIABLE\",\r\n\r\n\tmodules: []\r\n};\r\n\r\n// Set up the workspace\r\nlet toolbox = new Toolbox([\r\n\tcat_loops,\r\n\tcat_logic,\r\n\tcat_text,\r\n\tcat_math,\r\n\tcat_vars,\r\n\tEventCategory(locale.category.events),\r\n\t<Separator>{ gap: 0 },\r\n\r\n\tBCICategory(locale.category.bci),\r\n\tFlowCategory(locale.category.flow),\r\n\tPlayerCategory(locale.category.players)\r\n]);\r\nlet workspace = Blockly.inject(blockly_div, {\r\n\ttoolbox: toolbox.toString()\r\n});\r\n\r\n// Resize on window change\r\nlet onresize = function(e?: Event) {\r\n\tlet area = WindowManager.eById(\"workspace-area\");\r\n\r\n\t// Position blocklyDiv over blocklyArea.\r\n\tblockly_div.style.left = 0 + \"px\";\r\n\tblockly_div.style.top = 0 + \"px\";\r\n\tblockly_div.style.width = area.offsetWidth + \"px\";\r\n\tblockly_div.style.height = area.offsetHeight + \"px\";\r\n\r\n\tBlockly.svgResize(workspace);\r\n};\r\nwindow.addEventListener(\"resize\", onresize, false);\r\nonresize();\r\n\r\n// Highlight the blocks\r\nfunction __highlightBlock(id: string) {\r\n\tworkspace.highlightBlock(id);\r\n}\r\n\r\n// Add link between WebGL players and Blockly\r\nworkspace.registerToolboxCategoryCallback(\"PLAYERS\", PlayerCategoryCallback);\r\n\r\n// Add link between flow and blockly\r\nworkspace.registerToolboxCategoryCallback(\"FLOWS\", FlowCategoryCallback);\r\n\r\n// Allow for auto-updating\r\nworkspace.addChangeListener(\r\n\t(event: HTMLElementEventMap): void => {\r\n\t\tlet code = Blockly.JavaScript.workspaceToCode(workspace);\r\n\r\n\t\tcode_div.innerHTML = code;\r\n\t}\r\n);\r\n\r\n// =============================================================================\r\n// Flow blocks\r\n// =============================================================================\r\n// Register a mutator for showing the flow overlay\r\nBlockly.Extensions.registerMutator(\r\n\t\"flow_mutator\",\r\n\tFlowMutator.get_serialize(),\r\n\tfunction() {\r\n\t\tthis.setMutator(new FlowMutator());\r\n\t},\r\n\tnull\r\n);\r\n\r\n// Allow for new blocks to be created\r\nworkspace.registerButtonCallback(\"add_flow\", (e: HTMLElement) => {\r\n\t// Get the requested name\r\n\tlet name = prompt(locale.flow.prompt);\r\n\r\n\t// Do nothing if the user canceled or gave a non-valid name\r\n\tif (name == undefined || name.length == 0) return;\r\n\r\n\tlet fl = <flow_window_type>flow_window_list.get();\r\n\r\n\t// If the variable already exists, retry indefinetly\r\n\twhile (name != undefined && fl[name] != undefined) {\r\n\t\talert(locale.flow.already_exists(name));\r\n\t\tname = prompt(locale.flow.prompt);\r\n\t}\r\n\r\n\t// Last check\r\n\tif (name == undefined || name.length == 0) return;\r\n\r\n\t// Create the block and save its info to the window\r\n\tAddFlowBlock(name);\r\n\r\n\t// Redraw player toolbox\r\n\tworkspace.refreshToolboxSelection();\r\n});\r\n\r\n// =============================================================================\r\n// Player manipulation\r\n// =============================================================================\r\n// Add a player to the scene\r\nlet player_count: dictionary<number> = {};\r\nlet addPlayer = (\r\n\ttype: string,\r\n\tinit: { id: string; name: string; position: Point } = undefined\r\n) => {\r\n\t// Hide the modal\r\n\tlet modal_close = <HTMLElement>document.getElementsByClassName(\"close\")[0];\r\n\tmodal_close.click();\r\n\r\n\t// Keep track of how many players of each type for naming\r\n\tif (!player_count[type]) player_count[type] = 1;\r\n\r\n\tlet name: string, id: string, position: Point;\r\n\tif (init) {\r\n\t\tname = init.name;\r\n\t\tid = init.id;\r\n\t\tposition = init.position;\r\n\r\n\t\t// Update count if needed\r\n\t\tlet count = Number(name.match(/-([0-9]+)$/)[1]);\r\n\t\tif (player_count[type] < count) player_count[type] = count;\r\n\t} else {\r\n\t\tname = type + \"-\" + player_count[type];\r\n\t\tid = \"PLAYER_\" + name;\r\n\t\tposition = { x: 0, y: 0 };\r\n\t}\r\n\tlet path = (<dictionary<string>>config.paths)[type];\r\n\r\n\t// Increment player count\r\n\t++player_count[type];\r\n\r\n\t// Create the player\r\n\tplayers[id] = playground.create_sprite(id, name, type, path, () =>\r\n\t\t__drawFrame()\r\n\t);\r\n\tplayers[id].set_scale({ x: 0.1, y: 0.1 });\r\n\tplayers[id].set_position(position);\r\n\tplayer_window_list.set(\r\n\t\t(<player_list_type>player_window_list.get()).concat([[name, id, position]])\r\n\t);\r\n\r\n\t// Redraw player toolbox\r\n\tworkspace.refreshToolboxSelection();\r\n\r\n\t__drawFrame();\r\n};\r\nlet removePlayer = (id: string) => {\r\n\t// See if player is valid\r\n\tlet player = players[id];\r\n\r\n\tif (!player) {\r\n\t\tconsole.warn(\"Invalid player specified.\", id);\r\n\t\treturn;\r\n\t}\r\n\r\n\t// Remove the sprite\r\n\tplayer.delete();\r\n\tdelete players[id];\r\n\r\n\t// Remove the Blockly link to the sprite\r\n\tlet pl = <player_list_type>player_window_list.get();\r\n\tplayer_window_list.set(\r\n\t\tpl.filter(pair => {\r\n\t\t\tif (pair[1] === id) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t})\r\n\t);\r\n\r\n\t// Redraw player toolbox\r\n\tworkspace.refreshToolboxSelection();\r\n\r\n\tselected = \"\";\r\n\tmouse.shouldDelete = false;\r\n\t__drawFrame();\r\n};\r\nlet clear_players = () => {\r\n\tlet keys = Object.keys(players);\r\n\tfor (let i = 0; i != keys.length; ++i) {\r\n\t\t// Don't get rid of the background\r\n\t\tif (players[keys[i]].type == \"background\") continue;\r\n\r\n\t\tremovePlayer(players[keys[i]].id);\r\n\t}\r\n\r\n\t// Clear the player info\r\n\tplayer_count = {};\r\n};\r\n\r\n// =============================================================================\r\n// DOM bindings\r\n// =============================================================================\r\n// Handle Code execution\r\nlet exec = WindowManager.eById(\"play_arrow_handler\");\r\nlet run_icon = WindowManager.eById(\"play_arrow_icon\");\r\nlet interpManger: InterpManager = new InterpManager(workspace, {\r\n\t__drawFrame,\r\n\t__highlightBlock,\r\n\t__get_flow: get_flow_api(workspace)\r\n});\r\n\r\nexec.onclick = () => {\r\n\tlet code = Blockly.JavaScript.workspaceToCode(workspace);\r\n\tlet should_block = workspace.getBlocksByType(\"event_keypress\", false).length != 0;\r\n\r\n\tif (run_icon.innerHTML === \"play_arrow\") {\r\n\t\t// UI changes\r\n\t\trun_icon.innerHTML = \"stop\";\r\n\t\tinterpManger.run(code, () => run_icon.innerHTML = \"play_arrow\", should_block);\r\n\t} else {\r\n\t\tinterpManger.stop();\r\n\t\trun_icon.innerHTML = \"play_arrow\"; // UI changes\r\n\t}\r\n};\r\n\r\n// Handle saving and loading\r\nlet save_handler = WindowManager.eById(\"save_handler\");\r\nsave_handler.onclick = () => {\r\n\tlet as_dom = Blockly.Xml.workspaceToDom(workspace);\r\n\r\n\t// Save player info\r\n\tlet players_as_dom = document.createElement(\"players\");\r\n\tlet player_keys = Object.keys(players);\r\n\tfor (let i = 0; i != player_keys.length; ++i) {\r\n\t\tlet pla = players[player_keys[i]];\r\n\t\tif (pla.type == \"background\") continue;\r\n\r\n\t\tlet player_as_dom = document.createElement(\"player\");\r\n\t\tplayer_as_dom.setAttribute(\"position\", JSON.stringify(pla.get_position()));\r\n\t\tplayer_as_dom.setAttribute(\"type\", pla.type);\r\n\t\tplayer_as_dom.setAttribute(\"name\", pla.name);\r\n\t\tplayer_as_dom.setAttribute(\"id\", pla.id);\r\n\r\n\t\tplayers_as_dom.appendChild(player_as_dom);\r\n\t}\r\n\tas_dom.appendChild(players_as_dom);\r\n\r\n\t// Save flow info\r\n\tlet flows_as_dom = document.createElement(\"flows\");\r\n\tlet flows = flow_window_list.get();\r\n\tlet flow_keys = Object.keys(flows);\r\n\tfor (let i = 0; i != flow_keys.length; ++i) {\r\n\t\tlet flo = flows[flow_keys[i]];\r\n\r\n\t\tlet flow_as_dom = document.createElement(\"flow\");\r\n\t\tflow_as_dom.setAttribute(\"data\", flo.data);\r\n\t\tflow_as_dom.setAttribute(\"name\", flo.name);\r\n\r\n\t\tflows_as_dom.appendChild(flow_as_dom);\r\n\t}\r\n\tas_dom.appendChild(flows_as_dom);\r\n\r\n\tlet as_text = Blockly.Xml.domToText(as_dom);\r\n\r\n\tfunction download(filename: string, text: string) {\r\n\t\tvar element = document.createElement(\"a\");\r\n\t\telement.setAttribute(\r\n\t\t\t\"href\",\r\n\t\t\t\"data:text/plain;charset=utf-8,\" + encodeURIComponent(text)\r\n\t\t);\r\n\t\telement.setAttribute(\"download\", filename);\r\n\r\n\t\telement.style.display = \"none\";\r\n\t\tdocument.body.appendChild(element);\r\n\r\n\t\telement.click();\r\n\r\n\t\tdocument.body.removeChild(element);\r\n\t}\r\n\r\n\tdownload(\"workspace.txt\", as_text);\r\n};\r\n\r\nlet load_handler = WindowManager.eById(\"open_in_browser_handler\");\r\nlet load_input = WindowManager.eById(\"load_file_input\");\r\n\r\nload_handler.onclick = () => load_input.click();\r\nload_input.onchange = e => {\r\n\tlet file = (<HTMLInputElement>e.target).files[0];\r\n\tif (!file) {\r\n\t\treturn;\r\n\t}\r\n\r\n\t// Clear the players for the new loaded space\r\n\tclear_players();\r\n\r\n\t// Remove all blocks currently placed\r\n\tworkspace.clear();\r\n\tworkspace.clearUndo();\r\n\r\n\t// Remove the flow blocks\r\n\tlet flows = flow_window_list.get() as flow_window_type;\r\n\tlet keys = Object.keys(flows);\r\n\tfor (let i = 0; i != keys.length; ++i) {\r\n\t\tlet flo = flows[keys[i]];\r\n\t\tlet name = `flow_block_${flo.name}`;\r\n\t\tlet block = Blockly.Blocks[name] as flow_block;\r\n\r\n\t\tblock.editor_.destroy();\r\n\t\tblock.editor_ = undefined;\r\n\t\tCustomBlock.dispose(`flow_block_${flo.name}`, true);\r\n\t}\r\n\tflow_window_list.set({});\r\n\r\n\tlet reader = new FileReader();\r\n\treader.onload = e => {\r\n\t\tlet contents = (<FileReader>e.target).result.toString();\r\n\r\n\t\t// Convert to XML\r\n\t\tlet as_xml = Blockly.Xml.textToDom(contents);\r\n\r\n\t\t// Create all flow blocks not yet made\r\n\t\tlet flow_blocks = as_xml.querySelector(\"flows\");\r\n\t\tflow_blocks.querySelectorAll(\"flow\").forEach(flow => {\r\n\t\t\tlet block = AddFlowBlock(flow.getAttribute(\"name\"));\r\n\r\n\t\t\tlet as_flow = block.block() as flow_block;\r\n\t\t\tlet data = JSON.parse(flow.getAttribute(\"data\")) as flow_block_data;\r\n\t\t\tas_flow.data = flow.getAttribute(\"data\");\r\n\t\t\tas_flow.editor_.get_editor().fromJSON(data.editor);\r\n\t\t});\r\n\r\n\t\tlet player_blocks = as_xml.querySelector(\"players\");\r\n\t\tplayer_blocks.querySelectorAll(\"player\").forEach(player => {\r\n\t\t\tlet type = player.getAttribute(\"type\");\r\n\t\t\tlet init = {\r\n\t\t\t\tid: player.getAttribute(\"id\"),\r\n\t\t\t\tname: player.getAttribute(\"name\"),\r\n\t\t\t\tposition: JSON.parse(player.getAttribute(\"position\"))\r\n\t\t\t};\r\n\r\n\t\t\t// Create the player\r\n\t\t\taddPlayer(type, init);\r\n\t\t});\r\n\r\n\t\tBlockly.Xml.domToWorkspace(as_xml, workspace);\r\n\t};\r\n\r\n\treader.readAsText(file);\r\n};\r\n\r\n// Handle displaying battery\r\nlet battery_icon = WindowManager.eById(\"battery_icon\");\r\nlet present_battery = () => {\r\n\treturn;\r\n\r\n\tlet battery_level = WindowManager.fetch(\"battery\").get();\r\n\tif (battery_level < 0) return;\r\n\r\n\tlet interval = Math.round(battery_level / 10) * 10;\r\n\r\n\tif (interval < 20) battery_icon.innerHTML = \"battery_alert\";\r\n\telse if (interval > 90) battery_icon.innerHTML = \"battery_full\";\r\n\telse battery_icon.innerHTML = \"battery_\" + interval;\r\n};\r\n\r\nsetInterval(present_battery, 30 * 1000);\r\n\r\n// Handle Bluetooth\r\nlet connector = WindowManager.eById(\"bluetooth_handler\");\r\nlet connector_icon = WindowManager.eById(\"bluetooth_icon\");\r\nconnector.onclick = async () => {\r\n\tconnector.setAttribute(\"disabled\", \"true\");\r\n\r\n\tif (Device.state == DeviceState.CONNECTED) {\r\n\t\tawait Device.disconnect();\r\n\t\tconnector_icon.innerText = \"bluetooth\";\r\n\t} else {\r\n\t\ttry {\r\n\t\t\tconnector_icon.classList.add(\"blink\");\r\n\t\t\tconnector_icon.innerText = \"bluetooth_searching\";\r\n\t\t\tawait Device.connect();\r\n\r\n\t\t\tconsole.log(\"Connected device.\");\r\n\t\t\tconnector_icon.classList.remove(\"blink\");\r\n\t\t\tconnector_icon.innerText = \"bluetooth_connected\";\r\n\r\n\t\t\tsetTimeout(present_battery, 10 * 1000);\r\n\t\t} catch (e) {\r\n\t\t\tconnector_icon.classList.remove(\"blink\");\r\n\t\t\tconsole.log(locale.bluetooth.error.connection, e);\r\n\t\t\tconnector_icon.innerText = \"bluetooth\";\r\n\t\t}\r\n\t}\r\n\r\n\tconnector.removeAttribute(\"disabled\");\r\n};\r\n\r\n// Handle adding / removing players\r\nfor (let type in config.paths) {\r\n\tif (type === \"background\") continue;\r\n\r\n\tlet ele = <HTMLImageElement>WindowManager.eById(\"add_\" + type);\r\n\tele.onclick = () => addPlayer(type);\r\n\tele.src = (<dictionary<string>>config.paths)[type];\r\n\r\n\tlet del = WindowManager.eById(\"delete-character\");\r\n\tdel.onclick = () => removePlayer(selected);\r\n}\r\n"],"sourceRoot":""}